var m=(r,c,o)=>new Promise((i,p)=>{var f=a=>{try{l(o.next(a))}catch(d){p(d)}},t=a=>{try{l(o.throw(a))}catch(d){p(d)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(f,t);l((o=o.apply(r,c)).next())});import{$ as h}from"./bootstrap-CIlPtDbU.mjs";import{u as _}from"./vxe-table-CS5KFeE-.mjs";import{a as D,b as I}from"./index-Dp5S5Jis.mjs";import{h as V,i as x}from"./render-C5tDa4zc.mjs";import{t as S}from"./data-CRYXvPFo.mjs";import{g as k}from"./get-popup-container-BwMHEyJY.mjs";import{_ as F}from"./tag-style-picker.vue_vue_type_script_setup_true_lang-CNgK7HXv.mjs";import{a9 as L,Q as C,J as P,a3 as q,at as A,au as B,av as g,n as y,a8 as v,ar as O}from"../jse/index-index-CulmqKVw.mjs";import{u as U}from"./use-drawer-0pSlBI5S.mjs";const M=()=>[{component:"Select",componentProps:{placeholder:"TODO: 字典类型",getPopupContainer:k},fieldName:"dictType",label:"字典类型"},{component:"Input",fieldName:"dictLabel",label:"字典标签"}],X=[{type:"checkbox",width:60},{title:"字典标签",field:"cssClass",slots:{default:({row:r})=>{const{dictValue:c}=r;return V(c,[r])}}},{title:"字典键值",field:"dictValue"},{title:"字典排序",field:"dictSort"},{title:"备注",field:"remark"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],$=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"dictCode"},{component:"Input",componentProps:{disabled:!0},fieldName:"dictType",label:"字典类型"},{component:"Input",fieldName:"listClass",label:"标签样式"},{component:"Input",fieldName:"dictLabel",label:"数据标签",rules:"required"},{component:"Input",fieldName:"dictValue",label:"数据键值",rules:"required"},{component:"Textarea",componentProps:{placeholder:"可使用tailwind类名 如bg-blue w-full h-full等"},fieldName:"cssClass",formItemClass:"items-baseline",help:"标签的css样式, 可添加已经编译的css类名",label:"css类名"},{component:"InputNumber",fieldName:"dictSort",label:"显示排序",rules:"required"},{component:"Textarea",fieldName:"remark",formItemClass:"items-baseline",label:"备注"}],Y=L({__name:"dict-data-drawer",emits:["reload"],setup(r,{emit:c}){const o=c,i=C(!1),p=P(()=>i.value?h("pages.common.edit"):h("pages.common.add")),[f,t]=_({commonConfig:{componentProps:{class:"w-full"},formItemClass:"col-span-2",labelWidth:80},schema:$(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),l=C("default");function a(s){const e=Reflect.has(S,s);l.value=e?"default":"custom"}const[d,n]=U({onCancel:b,onConfirm:T,onOpenChange(s){return m(this,null,function*(){if(!s)return null;n.drawerLoading(!0);const{dictCode:e,dictType:w}=n.getData();if(i.value=!!e,t.setFieldValue("dictType",w),e&&i.value){const u=yield x(e);a(u.listClass),yield t.setValues(u)}n.drawerLoading(!1)})}});function T(){return m(this,null,function*(){try{n.drawerLoading(!0);const{valid:s}=yield t.validate();if(!s)return;const e=q(yield t.getValues());yield i.value?D(e):I(e),o("reload"),yield b()}catch(s){console.error(s)}finally{n.drawerLoading(!1)}})}function b(){return m(this,null,function*(){n.close(),yield t.resetForm(),l.value="default"})}function N(){return m(this,null,function*(){yield t.setFieldValue("listClass",void 0)})}return(s,e)=>(A(),B(v(d),{"close-on-click-modal":!1,title:p.value,class:"w-[600px]"},{default:g(()=>[y(v(f),null,{listClass:g(w=>[y(F,O(w,{"select-type":l.value,"onUpdate:selectType":e[0]||(e[0]=u=>l.value=u),onDeselect:N}),null,16,["select-type"])]),_:1})]),_:1},8,["title"]))}});export{Y as _,X as c,M as q};
