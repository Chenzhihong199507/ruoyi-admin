import{C as p}from"./index-yiE2I97I.mjs";import{a9 as N,b6 as C,Q as o,J as k,b7 as V,W as E,at as g,az as z,aC as c,b4 as D,aG as G,n as m,av as h,aD as y,a8 as d,au as I,ay as j}from"../jse/index-index-CulmqKVw.mjs";import{t as J,f as L}from"./tree-DR0G1ezI.mjs";import{T as O}from"./index-CVEhXdRN.mjs";import"./bootstrap-CIlPtDbU.mjs";import"./Checkbox-C1LX6amp.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./index-uwSnP2fA.mjs";import"./List-B93VJ5nE.mjs";import"./index-CwX3_37I.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";const P={class:"bg-background w-full rounded-lg border-[1px] p-[12px]"},Q={class:"flex items-center gap-2 border-b-[1px] pb-2"},W={class:"flex flex-wrap items-center justify-between border-b-[1px] py-2"},q={class:"py-2"},re=N({inheritAttrs:!1,__name:"menu-select",props:C({checkStrictly:{default:!0,type:Boolean},menuTree:{default:()=>[],type:Array}},{value:{default:()=>[],type:Array},valueModifiers:{}}),emits:C(["checkStrictlyChange"],["update:value"]),setup(r,{expose:b,emit:S}){const l=r,T=S,f=o(!1),v=o(!1),x=k(()=>!l.checkStrictly);function A(t){T("checkStrictlyChange",t.target.checked)}const K=k(()=>l.checkStrictly?"父子节点关联":"父子节点独立"),s=V(r,"value"),u=k(()=>J(l.menuTree).map(t=>t.id)),n=o([]),w=E(()=>l.menuTree,()=>{if(l.checkStrictly){const t=L(l.menuTree,s.value);n.value=[...t,...s.value]}else n.value=s.value;w()});function B(t,e){if(Array.isArray(t)){const a=e.halfCheckedKeys||[];n.value=[...a,...t]}else n.value=[...t.checked]}function U(t){s.value=t.target.checked?u.value:[],n.value=t.target.checked?u.value:[]}const i=o([]);function M(t){const e=t.target.checked;i.value=e?u.value:[]}return b({getCheckedKeys:()=>n.value}),(t,e)=>(g(),z("div",P,[c("div",Q,[e[5]||(e[5]=c("span",null,"节点状态: ",-1)),c("span",{class:D([[l.checkStrictly?"text-primary":"text-red-500"],"font-semibold"])},G(K.value),3)]),c("div",W,[m(d(p),{checked:f.value,"onUpdate:checked":e[0]||(e[0]=a=>f.value=a),onChange:M},{default:h(()=>e[6]||(e[6]=[y(" 展开/折叠全部 ")])),_:1},8,["checked"]),m(d(p),{checked:v.value,"onUpdate:checked":e[1]||(e[1]=a=>v.value=a),onChange:U},{default:h(()=>e[7]||(e[7]=[y(" 全选/取消全选 ")])),_:1},8,["checked"]),m(d(p),{checked:r.checkStrictly,onChange:A},{default:h(()=>e[8]||(e[8]=[y(" 父子节点关联 ")])),_:1},8,["checked"])]),c("div",q,[r.menuTree.length>0?(g(),I(d(O),{key:0,"check-strictly":x.value,"onUpdate:checkStrictly":e[2]||(e[2]=a=>x.value=a),"checked-keys":s.value,"onUpdate:checkedKeys":e[3]||(e[3]=a=>s.value=a),"expanded-keys":i.value,"onUpdate:expandedKeys":e[4]||(e[4]=a=>i.value=a),checkable:!0,"field-names":{title:"label",key:"id"},selectable:!1,"tree-data":r.menuTree,onCheck:B},null,8,["check-strictly","checked-keys","expanded-keys","tree-data"])):j("",!0)])]))}});export{re as default};
