var m=(r,d,t)=>new Promise((o,c)=>{var f=e=>{try{i(t.next(e))}catch(s){c(s)}},n=e=>{try{i(t.throw(e))}catch(s){c(s)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(f,n);i((t=t.apply(r,d)).next())});import{K as u,$ as g}from"./bootstrap-CIlPtDbU.mjs";import{u as y}from"./vxe-table-CS5KFeE-.mjs";import{c as _,a as w,b as S}from"./index-YggHP7OK.mjs";import{g as b,r as C}from"./render-C5tDa4zc.mjs";import{g as I}from"./get-popup-container-BwMHEyJY.mjs";import{a9 as v,Q as T,J as k,a3 as x,at as V,au as q,av as A,n as D,a8 as N}from"../jse/index-index-CulmqKVw.mjs";import{u as B}from"./use-modal-BmBYziM1.mjs";const U=()=>[{component:"Input",fieldName:"configName",label:"参数名称"},{component:"Input",fieldName:"configKey",label:"参数键名"},{component:"Select",componentProps:{getPopupContainer:I,options:b(u.SYS_YES_NO)},fieldName:"configType",label:"系统内置"},{component:"RangePicker",fieldName:"createTime",label:"创建时间"}],$=[{type:"checkbox",width:60},{title:"订单编号",field:"orderNo"},{title:"订单名称",field:"orderName"},{title:"金额",field:"amount"},{title:"支付状态",field:"paymentStatus",width:120,slots:{default:({row:r})=>C(r.paymentStatus,u.PAY_STATE)}},{title:"支付方式",field:"paymentMethod"},{title:"用户名称",field:"userName"},{title:"备注",field:"remark"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],P=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"configId",label:"参数主键"},{component:"Input",fieldName:"configName",label:"参数名称",rules:"required"},{component:"Input",fieldName:"configKey",label:"参数键名",rules:"required"},{component:"Input",fieldName:"configValue",label:"参数键值",rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:b(u.SYS_YES_NO),optionType:"button"},defaultValue:"N",fieldName:"configType",label:"是否内置",rules:"required"},{component:"Textarea",fieldName:"remark",formItemClass:"items-baseline",label:"备注"}],G=v({__name:"config-modal",emits:["reload"],setup(r,{emit:d}){const t=d,o=T(!1),c=k(()=>o.value?g("pages.common.edit"):g("pages.common.add")),[f,n]=y({commonConfig:{labelWidth:80},schema:P(),showDefaultActions:!1}),[i,e]=B({fullscreenButton:!1,onCancel:p,onConfirm:s,onOpenChange:l=>m(this,null,function*(){if(!l)return null;e.modalLoading(!0);const{id:a}=e.getData();if(o.value=!!a,o.value&&a){const h=yield _(a);yield n.setValues(h)}e.modalLoading(!1)})});function s(){return m(this,null,function*(){try{e.modalLoading(!0);const{valid:l}=yield n.validate();if(!l)return;const a=x(yield n.getValues());yield o.value?w(a):S(a),t("reload"),yield p()}catch(l){console.error(l)}finally{e.modalLoading(!1)}})}function p(){return m(this,null,function*(){e.close(),yield n.resetForm()})}return(l,a)=>(V(),q(N(i),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:A(()=>[D(N(f))]),_:1},8,["title"]))}});export{G as _,$ as c,U as q};
