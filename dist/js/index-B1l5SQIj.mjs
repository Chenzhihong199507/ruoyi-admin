var P=Object.defineProperty;var x=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(i,r,t)=>r in i?P(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t,$=(i,r)=>{for(var t in r||(r={}))R.call(r,t)&&D(i,t,r[t]);if(x)for(var t of x(r))z.call(r,t)&&D(i,t,r[t]);return i};var g=(i,r,t)=>new Promise((l,h)=>{var m=n=>{try{s(t.next(n))}catch(d){h(d)}},_=n=>{try{s(t.throw(n))}catch(d){h(d)}},s=n=>n.done?l(n.value):Promise.resolve(n.value).then(m,_);s((t=t.apply(i,r)).next())});import{I as Y,aq as A,M as B,bC as M}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{q as N,_ as O,c as j}from"./config-modal.vue_vue_type_script_setup_true_lang-DmqK5nF6.mjs";import{S as E}from"./index-BLUbi1M4.mjs";import{_ as G}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as W,Q as F,b2 as H,br as L,at as f,au as u,av as a,n as v,a8 as c,aC as Q,ap as C,aD as b,aG as k}from"../jse/index-index-CulmqKVw.mjs";import{u as J}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as K}from"./use-modal-BmBYziM1.mjs";import{P as U}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./index-YggHP7OK.mjs";import"./get-popup-container-BwMHEyJY.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";function X(i){return Y.get("/system/voucher/list",{params:i})}function T(i){return Y.deleteWithMsg(`/system/voucher/${i}`)}const Ze=W({__name:"index",setup(i){const r={commonConfig:{labelWidth:80},schema:N(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},t={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:j,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(p,y)=>g(this,[p,y],function*({page:o},e){return e!=null&&e.createTime?(e.params={beginTime:M(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:M(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield X($({pageNum:o.currentPage,pageSize:o.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"configId"},round:!0,align:"center",showOverflow:!0},l=F(!1),[h,m]=J({formOptions:r,gridOptions:t,gridEvents:{checkboxChange:o=>{l.value=o.records.length>0},checkboxAll:o=>{l.value=o.records.length>0}}}),[_,s]=K({connectedComponent:O});function n(){s.setData({}),s.open()}function d(o){return g(this,null,function*(){s.setData({id:o.configId}),s.open()})}function S(o){return g(this,null,function*(){yield T(o.configId),yield m.reload()})}function q(){const e=m.grid.getCheckboxRecords().map(p=>p.configId);B.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>g(this,null,function*(){yield T(e),yield m.reload()})})}return(o,e)=>{const p=H("a-button"),y=L("access");return f(),u(c(G),{"auto-content-height":!0},{default:a(()=>[v(c(h),null,{"toolbar-actions":a(()=>e[2]||(e[2]=[Q("span",{class:"pl-[7px] text-[16px]"},"参数列表",-1)])),"toolbar-tools":a(()=>[v(c(E),null,{default:a(()=>[C((f(),u(p,{disabled:!l.value,danger:"",type:"primary",onClick:q},{default:a(()=>[b(k(o.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:config:remove"],"code"]]),C((f(),u(p,{type:"primary",onClick:n},{default:a(()=>[b(k(o.$t("pages.common.add")),1)]),_:1})),[[y,["system:config:add"],"code"]])]),_:1})]),action:a(({row:w})=>[C((f(),u(p,{size:"small",type:"link",onClick:I=>d(w)},{default:a(()=>[b(k(o.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:config:edit"],"code"]]),v(c(U),{placement:"left",title:"确认删除？",onConfirm:I=>S(w)},{default:a(()=>[C((f(),u(p,{danger:"",size:"small",type:"link",onClick:e[0]||(e[0]=A(()=>{},["stop"]))},{default:a(()=>[b(k(o.$t("pages.common.delete")),1)]),_:1})),[[y,["system:config:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),v(c(_),{onReload:e[1]||(e[1]=w=>c(m).reload())})]),_:1})}}});export{Ze as default};
