var m=(s,f,o)=>new Promise((t,r)=>{var d=e=>{try{l(o.next(e))}catch(c){r(c)}},n=e=>{try{l(o.throw(e))}catch(c){r(c)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(d,n);l((o=o.apply(s,f)).next())});import{K as u,$ as g}from"./bootstrap-CIlPtDbU.mjs";import{u as y}from"./vxe-table-CS5KFeE-.mjs";import{c as _,a as w,b as S}from"./index-YggHP7OK.mjs";import{g as N,r as C}from"./render-C5tDa4zc.mjs";import{g as I}from"./get-popup-container-BwMHEyJY.mjs";import{a9 as V,Q as v,J as T,a3 as k,at as x,au as Y,av as q,n as D,a8 as b}from"../jse/index-index-CulmqKVw.mjs";import{u as B}from"./use-modal-BmBYziM1.mjs";const U=()=>[{component:"Input",fieldName:"configName",label:"参数名称"},{component:"Input",fieldName:"configKey",label:"参数键名"},{component:"Select",componentProps:{getPopupContainer:I,options:N(u.SYS_YES_NO)},fieldName:"configType",label:"系统内置"},{component:"RangePicker",fieldName:"createTime",label:"创建时间"}],$=[{type:"checkbox",width:60},{title:"参数名称",field:"configName"},{title:"参数KEY",field:"configKey"},{title:"参数Value",field:"configValue"},{title:"系统内置",field:"configType",width:120,slots:{default:({row:s})=>C(s.configType,u.SYS_YES_NO)}},{title:"备注",field:"remark"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],E=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"configId",label:"参数主键"},{component:"Input",fieldName:"configName",label:"参数名称",rules:"required"},{component:"Input",fieldName:"configKey",label:"参数键名",rules:"required"},{component:"Input",fieldName:"configValue",label:"参数键值",rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:N(u.SYS_YES_NO),optionType:"button"},defaultValue:"N",fieldName:"configType",label:"是否内置",rules:"required"},{component:"Textarea",fieldName:"remark",formItemClass:"items-baseline",label:"备注"}],G=V({__name:"config-modal",emits:["reload"],setup(s,{emit:f}){const o=f,t=v(!1),r=T(()=>t.value?g("pages.common.edit"):g("pages.common.add")),[d,n]=y({commonConfig:{labelWidth:80},schema:E(),showDefaultActions:!1}),[l,e]=B({fullscreenButton:!1,onCancel:p,onConfirm:c,onOpenChange:i=>m(this,null,function*(){if(!i)return null;e.modalLoading(!0);const{id:a}=e.getData();if(t.value=!!a,t.value&&a){const h=yield _(a);yield n.setValues(h)}e.modalLoading(!1)})});function c(){return m(this,null,function*(){try{e.modalLoading(!0);const{valid:i}=yield n.validate();if(!i)return;const a=k(yield n.getValues());yield t.value?w(a):S(a),o("reload"),yield p()}catch(i){console.error(i)}finally{e.modalLoading(!1)}})}function p(){return m(this,null,function*(){e.close(),yield n.resetForm()})}return(i,a)=>(x(),Y(b(l),{"close-on-click-modal":!1,title:r.value,class:"w-[550px]"},{default:q(()=>[D(b(d))]),_:1},8,["title"]))}});export{G as _,$ as c,U as q};
