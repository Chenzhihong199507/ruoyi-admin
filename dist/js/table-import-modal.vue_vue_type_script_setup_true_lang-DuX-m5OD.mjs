var C=Object.defineProperty;var p=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var f=(o,a,e)=>a in o?C(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,g=(o,a)=>{for(var e in a||(a={}))w.call(a,e)&&f(o,e,a[e]);if(p)for(var e of p(a))x.call(a,e)&&f(o,e,a[e]);return o};var m=(o,a,e)=>new Promise((d,s)=>{var u=t=>{try{l(e.next(t))}catch(i){s(i)}},c=t=>{try{l(e.throw(t))}catch(i){s(i)}},l=t=>t.done?d(t.value):Promise.resolve(t.value).then(u,c);l((e=e.apply(o,a)).next())});import"./vxe-table-CS5KFeE-.mjs";import{i as y,r as _}from"./index-CS4ZLkSY.mjs";import{a9 as N,at as k,au as B,av as S,n as T,a8 as b}from"../jse/index-index-CulmqKVw.mjs";import{u as V}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as v}from"./use-modal-BmBYziM1.mjs";const G=N({__name:"table-import-modal",emits:["reload"],setup(o,{emit:a}){const e=a,d={schema:[{label:"数据源",fieldName:"dataName",component:"Select",defaultValue:"master"},{label:"表名称",fieldName:"tableName",component:"Input"},{label:"表描述",fieldName:"tableComment",component:"Input"}],commonConfig:{labelWidth:60},showCollapseButton:!1,wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},s={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:[{type:"checkbox",width:60},{title:"表名称",field:"tableName",align:"left"},{title:"表描述",field:"tableComment"},{title:"创建时间",field:"createTime"},{title:"更新时间",field:"updateTime"}],keepSource:!0,size:"small",pagerConfig:{},proxyConfig:{ajax:{query:(h,q)=>m(this,[h,q],function*({page:r},n){return console.log(r),yield _(g({pageNum:r.currentPage,pageSize:r.pageSize},n))})}},rowConfig:{isHover:!0,keyField:"tableId"},round:!0,align:"center",showOverflow:!0},[u,c]=V({formOptions:d,gridOptions:s}),[l,t]=v({onOpenChange:r=>m(this,null,function*(){if(!r)return c.grid.clearCheckboxRow(),null}),onConfirm:i});function i(){return m(this,null,function*(){try{const n=c.grid.getCheckboxRecords().map(h=>h.tableName);if(n.length===0){t.close();return}t.modalLoading(!0),yield y(n.join(","),"master"),e("reload"),t.close()}catch(r){console.warn(r)}finally{t.modalLoading(!1)}})}return(r,n)=>(k(),B(b(l),{class:"w-[800px]",title:"导入表"},{default:S(()=>[T(b(u))]),_:1}))}});export{G as _};
