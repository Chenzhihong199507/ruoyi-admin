var S=Object.defineProperty,_=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var b=(o,t,e)=>t in o?S(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,c=(o,t)=>{for(var e in t||(t={}))I.call(t,e)&&b(o,e,t[e]);if(d)for(var e of d(t))N.call(t,e)&&b(o,e,t[e]);return o},f=(o,t)=>_(o,g(t));var h=(o,t,e)=>new Promise((m,l)=>{var u=s=>{try{a(e.next(s))}catch(i){l(i)}},p=s=>{try{a(e.throw(s))}catch(i){l(i)}},a=s=>s.done?m(s.value):Promise.resolve(s.value).then(u,p);a((e=e.apply(o,t)).next())});import{u as k}from"./vxe-table-CS5KFeE-.mjs";import{b as w}from"./index-ChAStMcI.mjs";import{i as y,h as B,s as x,K as O}from"./bootstrap-CIlPtDbU.mjs";import{g as U}from"./render-C5tDa4zc.mjs";import{p as E}from"./pick-TUD3VTZU.mjs";import{a9 as F,ak as V,at as q,az as C,n as D,a8 as A}from"../jse/index-index-CulmqKVw.mjs";const P={class:"mt-[16px] md:w-full lg:w-1/2 2xl:w-2/5"},M=F({__name:"base-setting",props:{profile:{}},emits:["reload"],setup(o,{emit:t}){const e=o,m=t,l=y(),u=B(),[p,a]=k({actionWrapperClass:"text-left ml-[68px] mb-[16px]",commonConfig:{labelWidth:60},handleSubmit:i,resetButtonOptions:{show:!1},schema:[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"userId",label:"用户ID",rules:"required"},{component:"Input",fieldName:"nickName",label:"昵称",rules:"required"},{component:"Input",fieldName:"email",label:"邮箱",rules:x().email("请输入正确的邮箱")},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:U(O.SYS_USER_SEX),optionType:"button"},defaultValue:"0",fieldName:"sex",label:"性别",rules:"required"},{component:"Input",fieldName:"phonenumber",label:"电话",rules:x().regex(/^1[3-9]\d{9}$/,"请输入正确的电话")}],submitButtonOptions:{text:"更新信息"}});function s(r){a.setState(n=>f(c({},n),{submitButtonOptions:f(c({},n.submitButtonOptions),{loading:r})}))}function i(r){return h(this,null,function*(){try{s(!0),yield w(r);const n=yield u.fetchUserInfo();l.setUserInfo(n),m("reload")}catch(n){console.error(n)}finally{s(!1)}})}return V(()=>{const r=E(e.profile.user,["userId","nickName","email","phonenumber","sex"]);for(const n in r)a.setFieldValue(n,r[n])}),(r,n)=>(q(),C("div",P,[D(A(p))]))}});export{M as _};
