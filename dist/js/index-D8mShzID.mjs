var q=Object.defineProperty;var _=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var D=(a,i,o)=>i in a?q(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o,$=(a,i)=>{for(var o in i||(i={}))z.call(i,o)&&D(a,o,i[o]);if(_)for(var o of _(i))A.call(i,o)&&D(a,o,i[o]);return a};var d=(a,i,o)=>new Promise((u,b)=>{var c=n=>{try{s(o.next(n))}catch(C){b(C)}},x=n=>{try{s(o.throw(n))}catch(C){b(C)}},s=n=>n.done?u(n.value):Promise.resolve(n.value).then(c,x);s((o=o.apply(a,i)).next())});import{aq as B,M as E,bC as M}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{d as I,e as T,f as N,g as O}from"./index-YggHP7OK.mjs";import{d as j}from"./download-BHYXKq0m.mjs";import{q as G,_ as F,c as H}from"./config-modal.vue_vue_type_script_setup_true_lang-BuN67sOt.mjs";import{S as L}from"./index-BLUbi1M4.mjs";import{_ as Q}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as W,Q as J,b2 as K,br as U,at as l,au as f,av as r,n as h,a8 as p,aC as X,aD as g,ap as k,aG as v}from"../jse/index-index-CulmqKVw.mjs";import{u as Z}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as V}from"./use-modal-BmBYziM1.mjs";import{P as ee}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./get-popup-container-BwMHEyJY.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const to=W({__name:"index",setup(a){const i={commonConfig:{labelWidth:80},schema:G(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:H,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(m,y)=>d(this,[m,y],function*({page:t},e){return e!=null&&e.createTime?(e.params={beginTime:M(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:M(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield O($({pageNum:t.currentPage,pageSize:t.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"configId"},round:!0,align:"center",showOverflow:!0},u=J(!1),[b,c]=Z({formOptions:i,gridOptions:o,gridEvents:{checkboxChange:t=>{u.value=t.records.length>0},checkboxAll:t=>{u.value=t.records.length>0}}}),[x,s]=V({connectedComponent:F});function n(){s.setData({}),s.open()}function C(t){return d(this,null,function*(){s.setData({id:t.configId}),s.open()})}function Y(t){return d(this,null,function*(){yield T(t.configId),yield c.reload()})}function R(){const e=c.grid.getCheckboxRecords().map(m=>m.configId);E.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>d(this,null,function*(){yield T(e),yield c.reload()})})}function S(){return d(this,null,function*(){yield N(),yield c.reload()})}return(t,e)=>{const m=K("a-button"),y=U("access");return l(),f(p(Q),{"auto-content-height":!0},{default:r(()=>[h(p(b),null,{"toolbar-actions":r(()=>e[3]||(e[3]=[X("span",{class:"pl-[7px] text-[16px]"},"参数列表",-1)])),"toolbar-tools":r(()=>[h(p(L),null,{default:r(()=>[h(m,{onClick:S},{default:r(()=>e[4]||(e[4]=[g(" 刷新缓存 ")])),_:1}),k((l(),f(m,{onClick:e[0]||(e[0]=w=>p(j)(p(I),"参数配置",{}))},{default:r(()=>[g(v(t.$t("pages.common.export")),1)]),_:1})),[[y,["system:config:export"],"code"]]),k((l(),f(m,{disabled:!u.value,danger:"",type:"primary",onClick:R},{default:r(()=>[g(v(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:config:remove"],"code"]]),k((l(),f(m,{type:"primary",onClick:n},{default:r(()=>[g(v(t.$t("pages.common.add")),1)]),_:1})),[[y,["system:config:add"],"code"]])]),_:1})]),action:r(({row:w})=>[k((l(),f(m,{size:"small",type:"link",onClick:P=>C(w)},{default:r(()=>[g(v(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:config:edit"],"code"]]),h(p(ee),{placement:"left",title:"确认删除？",onConfirm:P=>Y(w)},{default:r(()=>[k((l(),f(m,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=B(()=>{},["stop"]))},{default:r(()=>[g(v(t.$t("pages.common.delete")),1)]),_:1})),[[y,["system:config:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),h(p(x),{onReload:e[2]||(e[2]=w=>p(c).reload())})]),_:1})}}});export{to as default};
