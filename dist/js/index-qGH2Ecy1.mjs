var A=Object.defineProperty;var D=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var P=(n,a,t)=>a in n?A(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,T=(n,a)=>{for(var t in a||(a={}))z.call(a,t)&&P(n,t,a[t]);if(D)for(var t of D(a))B.call(a,t)&&P(n,t,a[t]);return n};var y=(n,a,t)=>new Promise((l,w)=>{var c=s=>{try{p(t.next(s))}catch(f){w(f)}},x=s=>{try{p(t.throw(s))}catch(f){w(f)}},p=s=>s.done?l(s.value):Promise.resolve(s.value).then(c,x);p((t=t.apply(n,a)).next())});import{cz as R,aq as E,M as I,bC as $}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{a as N,b as O,c as S,d as j}from"./index-DV4CYNzU.mjs";import{T as G}from"./table-switch-DVTqHQEs.mjs";import{d as U}from"./download-BHYXKq0m.mjs";import{_ as F,q as H,c as L}from"./tenant-package-drawer.vue_vue_type_script_setup_true_lang-D4bXMHUo.mjs";import{S as Q}from"./index-BLUbi1M4.mjs";import{_ as W}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as J,Q as K,b2 as V,br as X,at as g,au as u,av as r,n as C,a8 as i,aC as Z,ap as b,aD as h,aG as v}from"../jse/index-index-CulmqKVw.mjs";import{u as ee}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as te}from"./use-drawer-0pSlBI5S.mjs";import{P as oe}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./index-DV03ZwLB.mjs";import"./tree-select-panel.vue_vue_type_script_setup_true_lang-D0vP0S2i.mjs";import"./tree-DR0G1ezI.mjs";import"./index-CVEhXdRN.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const pt=J({__name:"index",setup(n){const a={commonConfig:{labelWidth:80},schema:H(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},t={checkboxConfig:{highlight:!0,reserve:!0},columns:L,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(d,k)=>y(this,[d,k],function*({page:o},e){return e!=null&&e.createTime?(e.params={beginTime:$(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:$(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield j(T({pageNum:o.currentPage,pageSize:o.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"packageId"},round:!0,align:"center",showOverflow:!0},l=K(!1),[w,c]=ee({formOptions:a,gridOptions:t,gridEvents:{checkboxChange:o=>{l.value=o.records.length>0},checkboxAll:o=>{l.value=o.records.length>0}}}),[x,p]=te({connectedComponent:F});function s(){p.setData({}),p.open()}function f(o){return y(this,null,function*(){p.setData({id:o.packageId}),p.open()})}function q(o){return y(this,null,function*(){yield S(o.packageId),yield c.query()})}function M(){const e=c.grid.getCheckboxRecords().map(d=>d.packageId);I.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>y(this,null,function*(){yield S(e),yield c.query(),l.value=!1})})}const{hasAccessByCodes:Y}=R();return(o,e)=>{const d=V("a-button"),k=X("access");return g(),u(i(W),{"auto-content-height":!0},{default:r(()=>[C(i(w),null,{"toolbar-actions":r(()=>e[3]||(e[3]=[Z("span",{class:"pl-[7px] text-[16px]"},"租户套餐列表",-1)])),"toolbar-tools":r(()=>[C(i(Q),null,{default:r(()=>[b((g(),u(d,{onClick:e[0]||(e[0]=m=>i(U)(i(N),"租户套餐数据",{}))},{default:r(()=>[h(v(o.$t("pages.common.export")),1)]),_:1})),[[k,["system:tenantPackage:export"],"code"]]),b((g(),u(d,{disabled:!l.value,danger:"",type:"primary",onClick:M},{default:r(()=>[h(v(o.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[k,["system:tenantPackage:remove"],"code"]]),b((g(),u(d,{type:"primary",onClick:s},{default:r(()=>[h(v(o.$t("pages.common.add")),1)]),_:1})),[[k,["system:tenantPackage:add"],"code"]])]),_:1})]),status:r(({row:m})=>[C(i(G),{modelValue:m.status,"onUpdate:modelValue":_=>m.status=_,api:()=>i(O)(m),disabled:!i(Y)(["system:tenantPackage:edit"]),reload:()=>i(c).query()},null,8,["modelValue","onUpdate:modelValue","api","disabled","reload"])]),action:r(({row:m})=>[b((g(),u(d,{size:"small",type:"link",onClick:_=>f(m)},{default:r(()=>[h(v(o.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[k,["system:tenantPackage:edit"],"code"]]),C(i(oe),{placement:"left",title:"确认删除？",onConfirm:_=>q(m)},{default:r(()=>[b((g(),u(d,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=E(()=>{},["stop"]))},{default:r(()=>[h(v(o.$t("pages.common.delete")),1)]),_:1})),[[k,["system:tenantPackage:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),C(i(x),{onReload:e[2]||(e[2]=m=>i(c).query())})]),_:1})}}});export{pt as default};
