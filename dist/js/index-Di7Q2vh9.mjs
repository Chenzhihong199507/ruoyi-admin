var B=Object.defineProperty;var $=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(n,o,t)=>o in n?B(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t,V=(n,o)=>{for(var t in o||(o={}))M.call(o,t)&&w(n,t,o[t]);if($)for(var t of $(o))T.call(o,t)&&w(n,t,o[t]);return n};var y=(n,o,t)=>new Promise((f,x)=>{var p=m=>{try{l(t.next(m))}catch(g){x(g)}},_=m=>{try{l(t.throw(m))}catch(g){x(g)}},l=m=>m.done?f(m.value):Promise.resolve(m.value).then(p,_);l((t=t.apply(n,o)).next())});import{cz as E,aq as N,M as O}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{d as P,e as R,f as S,g as G}from"./index-Dp5S5Jis.mjs";import{T as U}from"./table-switch-DVTqHQEs.mjs";import{d as j}from"./download-BHYXKq0m.mjs";import{q as F,c as H,a as L}from"./client-drawer-CQMCgOJt.mjs";import{S as Q}from"./index-BLUbi1M4.mjs";import{_ as W}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as I,Q as J,b2 as K,br as X,at as c,au as u,av as a,n as b,a8 as r,aC as Y,ap as C,aD as k,aG as v}from"../jse/index-index-CulmqKVw.mjs";import{u as Z}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as ee}from"./use-drawer-0pSlBI5S.mjs";import{P as te}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./get-popup-container-BwMHEyJY.mjs";import"./secret-input-CtJCNzVx.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const rt=I({__name:"index",setup(n){const o={commonConfig:{labelWidth:80},schema:F(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},t={checkboxConfig:{highlight:!0,reserve:!0,checkMethod:e=>(e==null?void 0:e.id)!==1},columns:L,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(d,h)=>y(this,[d,h],function*({page:e},i){return yield G(V({pageNum:e.currentPage,pageSize:e.pageSize},i))})}},rowConfig:{isHover:!0,keyField:"id",height:90},round:!0,align:"center",showOverflow:!0},f=J(!1),[x,p]=Z({formOptions:o,gridOptions:t,gridEvents:{checkboxChange:e=>{f.value=e.records.length>0},checkboxAll:e=>{f.value=e.records.length>0}}}),[_,l]=ee({connectedComponent:H});function m(){l.setData({}),l.open()}function g(e){return y(this,null,function*(){l.setData({id:e.id}),l.open()})}function q(e){return y(this,null,function*(){yield S(e.id),yield p.query()})}function A(){const i=p.grid.getCheckboxRecords().map(d=>d.id);O.confirm({title:"提示",okType:"danger",content:`确认删除选中的${i.length}条记录吗？`,onOk:()=>y(this,null,function*(){yield S(i),yield p.query()})})}const{hasAccessByCodes:z}=E();return(e,i)=>{const d=K("a-button"),h=X("access");return c(),u(r(W),{"auto-content-height":!0},{default:a(()=>[b(r(x),null,{"toolbar-actions":a(()=>i[3]||(i[3]=[Y("span",{class:"pl-[7px] text-[16px]"},"系统授权列表",-1)])),"toolbar-tools":a(()=>[b(r(Q),null,{default:a(()=>[C((c(),u(d,{onClick:i[0]||(i[0]=s=>r(j)(r(P),"系统授权数据",{}))},{default:a(()=>[k(v(e.$t("pages.common.export")),1)]),_:1})),[[h,["system:client:export"],"code"]]),C((c(),u(d,{disabled:!f.value,danger:"",type:"primary",onClick:A},{default:a(()=>[k(v(e.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[h,["system:client:remove"],"code"]]),C((c(),u(d,{type:"primary",onClick:m},{default:a(()=>[k(v(e.$t("pages.common.add")),1)]),_:1})),[[h,["system:client:add"],"code"]])]),_:1})]),status:a(({row:s})=>[b(r(U),{modelValue:s.status,"onUpdate:modelValue":D=>s.status=D,api:()=>r(R)(s),disabled:s.id===1||!r(z)(["system:client:edit"]),reload:()=>r(p).query()},null,8,["modelValue","onUpdate:modelValue","api","disabled","reload"])]),action:a(({row:s})=>[C((c(),u(d,{size:"small",type:"link",onClick:D=>g(s)},{default:a(()=>[k(v(e.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[h,["system:client:edit"],"code"]]),b(r(te),{disabled:s.id===1,placement:"left",title:"确认删除？",onConfirm:D=>q(s)},{default:a(()=>[C((c(),u(d,{disabled:s.id===1,danger:"",size:"small",type:"link",onClick:i[1]||(i[1]=N(()=>{},["stop"]))},{default:a(()=>[k(v(e.$t("pages.common.delete")),1)]),_:2},1032,["disabled"])),[[h,["system:client:remove"],"code"]])]),_:2},1032,["disabled","onConfirm"])]),_:1}),b(r(_),{onReload:i[2]||(i[2]=s=>r(p).query())})]),_:1})}}});export{rt as default};
