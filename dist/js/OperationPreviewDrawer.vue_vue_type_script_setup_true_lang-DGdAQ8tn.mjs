import{u,_}from"./useDescription-D4BFEr9E.mjs";import{g as p,r as d,c as b,d as m}from"./render-C5tDa4zc.mjs";import{T}from"./index-BsPmTjuM.mjs";import{K as o}from"./bootstrap-CIlPtDbU.mjs";import{n as r,aD as S,a4 as h,a9 as g,at as N,au as P,av as D,a8 as s}from"../jse/index-index-CulmqKVw.mjs";import{u as O}from"./use-drawer-0pSlBI5S.mjs";function w(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!h(e)}const C=()=>[{component:"Input",fieldName:"title",label:"系统模块"},{component:"Input",fieldName:"operName",label:"操作人员"},{component:"Select",componentProps:{options:p(o.SYS_OPER_TYPE)},fieldName:"businessType",label:"操作类型"},{component:"Input",fieldName:"operIp",label:"操作IP"},{component:"Select",componentProps:{options:p(o.SYS_COMMON_STATUS)},fieldName:"status",label:"状态"},{component:"RangePicker",fieldName:"createTime",label:"操作时间",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss"}}],E=[{type:"checkbox",width:60},{field:"title",title:"系统模块"},{title:"操作类型",field:"businessType",cellRender:{name:"DictTag",props:{field:"businessType",dictName:o.SYS_OPER_TYPE}}},{field:"operName",title:"操作人员"},{field:"operIp",title:"IP地址"},{field:"operLocation",title:"IP信息"},{field:"status",title:"操作状态",cellRender:{name:"DictTag",props:{field:"status",dictName:o.SYS_COMMON_STATUS}}},{field:"operTime",title:"操作日期"},{field:"costTime",title:"操作耗时",formatter({cellValue:e}){return`${e} ms`}},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:120}],x=[{field:"operId",label:"日志编号"},{field:"status",label:"操作结果",render(e){return d(e,o.SYS_COMMON_STATUS)}},{field:"title",label:"操作模块",labelMinWidth:80,render(e,{businessType:t}){const l=d(t,o.SYS_OPER_TYPE);return r("div",{class:"flex items-center"},[r(T,null,w(e)?e:{default:()=>[e]}),l])}},{field:"operIp",label:"操作信息",render(e,t){return`账号: ${t.operName} / ${t.deptName} / ${t.operIp} / ${t.operLocation}`}},{field:"operUrl",label:"请求信息",render(e,t){const{operUrl:l,requestMethod:n}=t,a=b(n);return r("span",null,[a,S(" "),l])}},{field:"errorMsg",label:"异常信息",render(e){return r("span",{class:"font-bold text-red-600"},[e])},show:e=>e&&e.errorMsg!==""},{field:"method",label:"方法"},{field:"operParam",label:"请求参数",render(e){return r("div",{class:"max-h-[300px] overflow-y-auto"},[m(e)])}},{field:"jsonResult",label:"响应参数",render(e){return r("div",{class:"max-h-[300px] overflow-y-auto"},[m(e)])},show(e){return e&&e.jsonResult}},{field:"costTime",label:"耗时",render(e){return`${e} ms`}},{field:"operTime",label:"操作时间"}],$=g({__name:"OperationPreviewDrawer",setup(e){const[t,l]=O({onOpenChange:f}),[n,{setDescProps:a}]=u({column:1,schema:x});function f(i){if(!i)return null;const{record:c}=l.getData();a({data:c},!0)}return(i,c)=>(N(),P(s(t),{footer:!1,class:"w-[600px]",title:"查看日志"},{default:D(()=>[r(s(_),{onRegister:s(n)},null,8,["onRegister"])]),_:1}))}});export{$ as _,E as c,C as q};
