var w=(r,C,o)=>new Promise((l,k)=>{var p=n=>{try{i(o.next(n))}catch(s){k(s)}},y=n=>{try{i(o.throw(n))}catch(s){k(s)}},i=n=>n.done?l(n.value):Promise.resolve(n.value).then(p,y);i((o=o.apply(r,C)).next())});import{t as E,f as I}from"./tree-DR0G1ezI.mjs";import{C as b}from"./index-yiE2I97I.mjs";import{a9 as M,b6 as D,Q as h,J as S,b7 as V,W as z,ak as P,q as G,at as B,az as L,aC as c,b4 as R,aG as K,aD as u,n as A,av as m,a8 as x,au as $,bc as q,aE as F,as as J,aw as Q,ax as W,ay as H}from"../jse/index-index-CulmqKVw.mjs";import{T as X}from"./index-CVEhXdRN.mjs";const Y={class:"bg-background w-full rounded-lg border-[1px] p-[12px]"},Z={class:"flex items-center justify-between gap-2 border-b-[1px] pb-2"},_={class:"text-primary mx-1 font-semibold"},ee={class:"flex flex-wrap items-center justify-between border-b-[1px] py-2"},te={class:"py-2"},de=M({inheritAttrs:!1,__name:"tree-select-panel",props:D({checkStrictly:{default:!0,type:Boolean},expandAllOnInit:{default:!1,type:Boolean},fieldNames:{default:()=>({key:"id",title:"label"}),type:Object},resetOnStrictlyChange:{default:!0,type:Boolean},treeData:{default:()=>[],type:Array}},{value:{default:()=>[],type:Array},valueModifiers:{}}),emits:D(["checkStrictlyChange"],["update:value"]),setup(r,{expose:C,emit:o}){const l=r,k=o,p=h(!1),y=h(!1),i=S(()=>!l.checkStrictly),n=S(()=>l.checkStrictly?"父子节点关联":"父子节点独立"),s=V(r,"value"),f=S(()=>{const t=l.fieldNames.key;return E(l.treeData).map(e=>e[t])}),d=h([]),O=z(()=>l.treeData,()=>{if(l.checkStrictly){const t=I(l.treeData,s.value);d.value=[...t,...s.value]}else d.value=s.value;O()});function N(t,e){if(Array.isArray(t)){const a=e.halfCheckedKeys||[];d.value=[...a,...t]}else d.value=[...t.checked]}function T(t){s.value=t.target.checked?f.value:[],d.value=t.target.checked?f.value:[]}const v=h([]);function U(t){const e=t.target.checked;v.value=e?f.value:[]}function j(t){k("checkStrictlyChange",t.target.checked),l.resetOnStrictlyChange&&(s.value=[],d.value=[])}return C({getCheckedKeys:()=>d.value}),P(()=>w(this,null,function*(){l.expandAllOnInit&&(yield G(),v.value=f.value)})),(t,e)=>(B(),L("div",Y,[c("div",Z,[c("div",null,[e[5]||(e[5]=c("span",null,"节点状态: ",-1)),c("span",{class:R([l.checkStrictly?"text-primary":"text-red-500"])},K(n.value),3)]),c("div",null,[e[6]||(e[6]=u(" 已选中 ")),c("span",_,K(d.value.length),1),e[7]||(e[7]=u(" 个节点 "))])]),c("div",ee,[A(x(b),{checked:p.value,"onUpdate:checked":e[0]||(e[0]=a=>p.value=a),onChange:U},{default:m(()=>e[8]||(e[8]=[u(" 展开/折叠全部 ")])),_:1},8,["checked"]),A(x(b),{checked:y.value,"onUpdate:checked":e[1]||(e[1]=a=>y.value=a),onChange:T},{default:m(()=>e[9]||(e[9]=[u(" 全选/取消全选 ")])),_:1},8,["checked"]),A(x(b),{checked:r.checkStrictly,onChange:j},{default:m(()=>e[10]||(e[10]=[u(" 父子节点关联 ")])),_:1},8,["checked"])]),c("div",te,[r.treeData.length>0?(B(),$(x(X),{key:0,"check-strictly":i.value,"onUpdate:checkStrictly":e[2]||(e[2]=a=>i.value=a),"checked-keys":s.value,"onUpdate:checkedKeys":e[3]||(e[3]=a=>s.value=a),"expanded-keys":v.value,"onUpdate:expandedKeys":e[4]||(e[4]=a=>v.value=a),checkable:!0,"field-names":r.fieldNames,selectable:!1,"tree-data":r.treeData,onCheck:N},q({_:2},[F(Object.keys(t.$slots),a=>({name:a,fn:m(g=>[J(t.$slots,a,Q(W(g!=null?g:{})))])}))]),1032,["check-strictly","checked-keys","expanded-keys","field-names","tree-data"])):H("",!0)])]))}});export{de as _};
