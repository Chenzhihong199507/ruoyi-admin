var J=Object.defineProperty;var P=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var R=(p,s,a)=>s in p?J(p,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[s]=a,A=(p,s)=>{for(var a in s||(s={}))K.call(s,a)&&R(p,a,s[a]);if(P)for(var a of P(s))V.call(s,a)&&R(p,a,s[a]);return p};var x=(p,s,a)=>new Promise((D,_)=>{var I=l=>{try{g(a.next(l))}catch(d){_(d)}},M=l=>{try{g(a.throw(l))}catch(d){_(d)}},g=l=>l.done?D(l.value):Promise.resolve(l.value).then(I,M);g((a=a.apply(p,s)).next())});import{$ as C,aq as S,M as X,bC as q}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{u as Z,a as ee,b as Y,c as te}from"./index-DxROXI-t.mjs";import{T as oe}from"./table-switch-DVTqHQEs.mjs";import{d as re}from"./download-BHYXKq0m.mjs";import{q as ae,_ as ie,c as se}from"./user-drawer.vue_vue_type_script_setup_true_lang-YL4qDYcF.mjs";import{_ as ne}from"./user-import-modal.vue_vue_type_script_setup_true_lang-BM8bWTX5.mjs";import{_ as pe}from"./user-info-modal.vue_vue_type_script_setup_true_lang-C2g-JyjZ.mjs";import{_ as me}from"./user-reset-pwd-modal.vue_vue_type_script_setup_true_lang-BrAO7n4N.mjs";import{S as le}from"./index-BLUbi1M4.mjs";import{A as U}from"./index-BExLSD2j.mjs";import{D as de}from"./index-CNH5Dkx1.mjs";import{M as ce,a as z}from"./index-epHOG_uQ.mjs";import{_ as ue}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as fe,Q as B,b2 as ge,br as ye,at as m,au as u,av as r,aC as E,n,a8 as t,ap as k,aD as f,aG as v,az as Ce,F as ke,ay as ve}from"../jse/index-index-CulmqKVw.mjs";import{u as $}from"./use-modal-BmBYziM1.mjs";import{u as _e}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as he}from"./use-drawer-0pSlBI5S.mjs";import{P as be}from"./index-BLw-otuj.mjs";import{g as xe}from"./get-popup-container-BwMHEyJY.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./data-BPjxELxr.mjs";import"./index-CzbPtRhx.mjs";import"./create-icon-DyKWIynC.mjs";import"./useDescription-D4BFEr9E.mjs";import"./index-hMhHosxt.mjs";import"./index-D6mTUP6j.mjs";import"./index-BA6odBth.mjs";import"./Dropdown-XTxBxfwO.mjs";import"./pick-TUD3VTZU.mjs";import"./index-BmGsg0FM.mjs";import"./useBreakpoint-B7o6jFLY.mjs";import"./index-crWPCwF-.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./loading-7m7uS9S_.mjs";const De={class:"flex h-full gap-[8px]"},Gt=fe({__name:"index",setup(p){const[s,a]=$({connectedComponent:ne});function D(){a.open()}const _=B([]),I={schema:ae(),commonConfig:{labelWidth:80},wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},M={checkboxConfig:{highlight:!0,reserve:!0,trigger:"default",checkMethod:({row:o})=>(o==null?void 0:o.userId)!==1},columns:se,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(c,y)=>x(this,[c,y],function*({page:o},e){return e!=null&&e.createTime?(e.params={beginTime:q(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:q(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),_.value.length===1?e.deptId=_.value[0]:Reflect.deleteProperty(e,"deptId"),yield te(A({pageNum:o.currentPage,pageSize:o.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"userId",height:48},round:!0,align:"center",showOverflow:!0},g=B(!1),[l,d]=_e({formOptions:I,gridOptions:M,gridEvents:{checkboxChange:o=>{g.value=o.records.length>0},checkboxAll:o=>{g.value=o.records.length>0}}}),[N,b]=he({connectedComponent:ie});function O(){b.setData({}),b.open()}function F(o){b.setData({id:o.userId}),b.open()}function j(o){return x(this,null,function*(){yield Y(o.userId),yield d.query()})}function G(){const e=d.grid.getCheckboxRecords().map(c=>c.userId);X.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>x(this,null,function*(){yield Y(e),yield d.query()})})}const[H,w]=$({connectedComponent:pe});function L(o){w.setData({userId:o.userId}),w.open()}const[Q,T]=$({connectedComponent:me});function W(o){T.setData({record:o}),T.open()}return(o,e)=>{const c=ge("a-button"),y=ye("access");return m(),u(t(ue),{"auto-content-height":!0},{default:r(()=>[E("div",De,[n(t(l),{class:"flex-1 overflow-hidden"},{"toolbar-actions":r(()=>e[3]||(e[3]=[E("span",{class:"pl-[7px] text-[16px]"},"用户列表",-1)])),"toolbar-tools":r(()=>[n(t(le),null,{default:r(()=>[k((m(),u(c,{onClick:e[0]||(e[0]=i=>t(re)(t(Z),"用户管理",{}))},{default:r(()=>[f(v(t(C)("pages.common.export")),1)]),_:1})),[[y,["system:user:export"],"code"]]),k((m(),u(c,{onClick:D},{default:r(()=>[f(v(t(C)("pages.common.import")),1)]),_:1})),[[y,["system:user:import"],"code"]]),k((m(),u(c,{disabled:!g.value,danger:"",type:"primary",onClick:G},{default:r(()=>[f(v(t(C)("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:user:remove"],"code"]]),k((m(),u(c,{type:"primary",onClick:O},{default:r(()=>[f(v(t(C)("pages.common.add")),1)]),_:1})),[[y,["system:user:add"],"code"]])]),_:1})]),avatar:r(({row:i})=>[i.avatar?(m(),u(t(U),{key:0,src:i.avatar},null,8,["src"])):(m(),u(t(U),{key:1,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))]),status:r(({row:i})=>[n(t(oe),{modelValue:i.status,"onUpdate:modelValue":h=>i.status=h,api:()=>t(ee)(i),disabled:i.userId===1,reload:()=>t(d).query()},null,8,["modelValue","onUpdate:modelValue","api","disabled","reload"])]),action:r(({row:i})=>[i.userId!==1?(m(),Ce(ke,{key:0},[k((m(),u(c,{size:"small",type:"link",onClick:S(h=>F(i),["stop"])},{default:r(()=>[f(v(t(C)("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:user:edit"],"code"]]),n(t(be),{placement:"left",title:"确认删除？",onConfirm:h=>j(i)},{default:r(()=>[k((m(),u(c,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=S(()=>{},["stop"]))},{default:r(()=>[f(v(t(C)("pages.common.delete")),1)]),_:1})),[[y,["system:user:remove"],"code"]])]),_:2},1032,["onConfirm"]),n(t(de),{"get-popup-container":t(xe),placement:"bottomRight"},{overlay:r(()=>[n(t(ce),null,{default:r(()=>[n(t(z),{key:"1",onClick:h=>L(i)},{default:r(()=>e[4]||(e[4]=[f(" 用户信息 ")])),_:2},1032,["onClick"]),n(t(z),{key:"2",onClick:h=>W(i)},{default:r(()=>e[5]||(e[5]=[f(" 重置密码 ")])),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[n(c,{size:"small",type:"link"},{default:r(()=>e[6]||(e[6]=[f("更多")])),_:1})]),_:2},1032,["get-popup-container"])],64)):ve("",!0)]),_:1})]),n(t(s)),n(t(N),{onReload:e[2]||(e[2]=i=>t(d).query())}),n(t(H)),n(t(Q))]),_:1})}}});export{Gt as default};
