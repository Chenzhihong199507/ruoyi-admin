var R=Object.defineProperty;var D=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var _=(r,a,o)=>a in r?R(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,x=(r,a)=>{for(var o in a||(a={}))z.call(a,o)&&_(r,o,a[o]);if(D)for(var o of D(a))A.call(a,o)&&_(r,o,a[o]);return r};var v=(r,a,o)=>new Promise((u,f)=>{var w=i=>{try{g(o.next(i))}catch(y){f(y)}},c=i=>{try{g(o.throw(i))}catch(y){f(y)}},g=i=>i.done?u(i.value):Promise.resolve(i.value).then(w,c);g((o=o.apply(r,a)).next())});import{aq as B,M as E,bC as $}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{d as I,a as M,b as N}from"./dict-type-SUN05zMk.mjs";import{d as j}from"./download-BHYXKq0m.mjs";import{e as G}from"./mitt-BqA_wVvo.mjs";import{_ as F,q as H,c as L}from"./dict-type-modal.vue_vue_type_script_setup_true_lang-SW8UEgAM.mjs";import{S as Q}from"./index-BLUbi1M4.mjs";import{_ as W}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as J,Q as Y,b2 as K,br as U,at as l,au as p,av as n,n as k,a8 as d,aC as X,aD as m,ap as b,aG as h}from"../jse/index-index-CulmqKVw.mjs";import{u as Z}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as V}from"./use-modal-BmBYziM1.mjs";import{P as ee}from"./index-BLw-otuj.mjs";const fe=J({__name:"index",setup(r){const a={commonConfig:{labelWidth:70},schema:H(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},o={checkboxConfig:{highlight:!0,reserve:!0},columns:L,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(s,...C)=>v(this,[s,...C],function*({page:t},e={}){return e!=null&&e.createTime?(e.params={beginTime:$(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:$(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield N(x({pageNum:t.currentPage,pageSize:t.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"dictId"},round:!0,align:"center",showOverflow:!0},u=Y(!1),f=Y(""),[w,c]=Z({formOptions:a,gridOptions:o,gridEvents:{cellClick:t=>{const{row:e}=t;f.value!==e.dictType&&(G.emit("rowClick",e.dictType),f.value=e.dictType)},checkboxChange:t=>{u.value=t.records.length>0},checkboxAll:t=>{u.value=t.records.length>0}}}),[g,i]=V({connectedComponent:F});function y(){i.setData({}),i.open()}function q(t){return v(this,null,function*(){i.setData({id:t.dictId}),i.open()})}function S(t){return v(this,null,function*(){yield M(t.dictId),yield c.query()})}function O(){const e=c.grid.getCheckboxRecords().map(s=>s.dictId);E.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>v(this,null,function*(){yield M(e),yield c.query()})})}return(t,e)=>{const s=K("a-button"),C=U("access");return l(),p(d(W),{"auto-content-height":!0},{default:n(()=>[k(d(w),null,{"toolbar-actions":n(()=>e[3]||(e[3]=[X("span",{class:"pl-[7px] text-[16px]"},"字典类型列表",-1)])),"toolbar-tools":n(()=>[k(d(Q),null,{default:n(()=>[k(s,{danger:"",type:"primary"},{default:n(()=>e[4]||(e[4]=[m("缓存(TODO)")])),_:1}),b((l(),p(s,{onClick:e[0]||(e[0]=T=>d(j)(d(I),"字典类型数据",{}))},{default:n(()=>[m(h(t.$t("pages.common.export")),1)]),_:1})),[[C,["system:dict:export"],"code"]]),b((l(),p(s,{disabled:!u.value,danger:"",type:"primary",onClick:O},{default:n(()=>[m(h(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[C,["system:dict:remove"],"code"]]),b((l(),p(s,{type:"primary",onClick:y},{default:n(()=>[m(h(t.$t("pages.common.add")),1)]),_:1})),[[C,["system:dict:add"],"code"]])]),_:1})]),action:n(({row:T})=>[b((l(),p(s,{size:"small",type:"link",onClick:P=>q(T)},{default:n(()=>[m(h(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[C,["system:dict:edit"],"code"]]),k(d(ee),{placement:"left",title:"确认删除？",onConfirm:P=>S(T)},{default:n(()=>[b((l(),p(s,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=B(()=>{},["stop"]))},{default:n(()=>[m(h(t.$t("pages.common.delete")),1)]),_:1})),[[C,["system:dict:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),k(d(g),{onReload:e[2]||(e[2]=T=>d(c).query())})]),_:1})}}});export{fe as _};
