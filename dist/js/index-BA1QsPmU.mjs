var E=Object.defineProperty;var D=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var T=(a,t,o)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,P=(a,t)=>{for(var o in t||(t={}))R.call(t,o)&&T(a,o,t[o]);if(D)for(var o of D(t))z.call(t,o)&&T(a,o,t[o]);return a};var C=(a,t,o)=>new Promise((w,c)=>{var x=r=>{try{f(o.next(r))}catch(g){c(g)}},l=r=>{try{f(o.throw(r))}catch(g){c(g)}},f=r=>r.done?w(r.value):Promise.resolve(r.value).then(x,l);f((o=o.apply(a,t)).next())});import{bN as A,I as S,aq as B,M as j,bC as $}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{d as G}from"./download-BHYXKq0m.mjs";import{g as I}from"./get-popup-container-BwMHEyJY.mjs";import{S as L}from"./index-BLUbi1M4.mjs";import{_ as W}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as F,Q as _,b2 as H,br as Q,at as d,au as u,av as n,n as v,a8 as p,aC as J,ap as k,aD as b,aG as h}from"../jse/index-index-CulmqKVw.mjs";import{u as K}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as U}from"./use-drawer-0pSlBI5S.mjs";import{P as X}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";function Z(a){return S.get("/system/packagePlan/list",{params:a})}function V(a){return A("/system/packagePlan/export",a)}function M(a){return S.deleteWithMsg(`/system/packagePlan/${a.join(",")}`)}const ee=()=>[{component:"Select",componentProps:{placeholder:"TODO: 字典类型",getPopupContainer:I},fieldName:"dictType",label:"字典类型"},{component:"Input",fieldName:"dictLabel",label:"字典标签"}],te=[{type:"checkbox",width:60},{title:"套餐名称",field:"name"},{title:"套餐价格",field:"price"},{title:"计划详情",field:"planDetail"},{title:"备注",field:"remark"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],tt=F({__name:"index",setup(a){const t=_(""),o={commonConfig:{labelWidth:80},schema:ee(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},w={checkboxConfig:{highlight:!0,reserve:!0},columns:te,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(s,...y)=>C(this,[s,...y],function*({page:i},e={}){e!=null&&e.createTime?(e.params={beginTime:$(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:$(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params");const m=P({pageNum:i.currentPage,pageSize:i.pageSize},e);return t.value&&(m.dictType=t.value),yield Z(m)})}},rowConfig:{isHover:!0,keyField:"dictCode"},round:!0,align:"center",showOverflow:!0},c=_(!1),[x,l]=K({formOptions:o,gridOptions:w,gridEvents:{checkboxChange:i=>{c.value=i.records.length>0},checkboxAll:i=>{c.value=i.records.length>0}}}),[f,r]=U({});function g(){r.setData({dictType:t.value}),r.open()}function Y(i){return C(this,null,function*(){r.setData({dictType:t.value,dictCode:i.dictCode}),r.open()})}function q(i){return C(this,null,function*(){yield M(i.dictCode),yield l.query()})}function N(){const e=l.grid.getCheckboxRecords().map(s=>s.dictCode);j.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>C(this,null,function*(){yield M(e),yield l.query()})})}return(i,e)=>{const s=H("a-button"),y=Q("access");return d(),u(p(W),{"auto-content-height":!0},{default:n(()=>[v(p(x),null,{"toolbar-actions":n(()=>e[3]||(e[3]=[J("span",{class:"pl-[7px] text-[16px]"},"字典数据列表",-1)])),"toolbar-tools":n(()=>[v(p(L),null,{default:n(()=>[k((d(),u(s,{onClick:e[0]||(e[0]=m=>p(G)(p(V),"字典数据",{}))},{default:n(()=>[b(h(i.$t("pages.common.export")),1)]),_:1})),[[y,["system:dict:export"],"code"]]),k((d(),u(s,{disabled:!c.value,danger:"",type:"primary",onClick:N},{default:n(()=>[b(h(i.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[y,["system:dict:remove"],"code"]]),k((d(),u(s,{disabled:t.value==="",type:"primary",onClick:g},{default:n(()=>[b(h(i.$t("pages.common.add")),1)]),_:1},8,["disabled"])),[[y,["system:dict:add"],"code"]])]),_:1})]),action:n(({row:m})=>[k((d(),u(s,{size:"small",type:"link",onClick:O=>Y(m)},{default:n(()=>[b(h(i.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[y,["system:dict:edit"],"code"]]),v(p(X),{placement:"left",title:"确认删除？",onConfirm:O=>q(m)},{default:n(()=>[k((d(),u(s,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=B(()=>{},["stop"]))},{default:n(()=>[b(h(i.$t("pages.common.delete")),1)]),_:1})),[[y,["system:dict:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),v(p(f),{onReload:e[2]||(e[2]=m=>p(l).query())})]),_:1})}}});export{tt as default};
