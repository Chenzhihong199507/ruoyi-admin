var O=Object.defineProperty;var _=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var w=(m,i,a)=>i in m?O(m,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[i]=a,R=(m,i)=>{for(var a in i||(i={}))F.call(i,a)&&w(m,a,i[a]);if(_)for(var a of _(i))j.call(i,a)&&w(m,a,i[a]);return m};var h=(m,i,a)=>new Promise((y,$)=>{var p=l=>{try{d(a.next(l))}catch(C){$(C)}},x=l=>{try{d(a.throw(l))}catch(C){$(C)}},d=l=>l.done?y(l.value):Promise.resolve(l.value).then(p,x);d((a=a.apply(m,i)).next())});import{cz as G,u as U,aq as T,M as V,bC as A}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{r as H,a as K,b as I,c as L}from"./index-BQjO2Nl8.mjs";import{T as Q}from"./table-switch-DVTqHQEs.mjs";import{d as W}from"./download-BHYXKq0m.mjs";import{q as J,c as X}from"./data-BPjxELxr.mjs";import{_ as Z}from"./role-auth-modal.vue_vue_type_script_setup_true_lang-D7ZKJuHC.mjs";import{_ as ee}from"./role-drawer.vue_vue_type_script_setup_true_lang-BcdK0gtQ.mjs";import{S as te}from"./index-BLUbi1M4.mjs";import{D as oe}from"./index-CNH5Dkx1.mjs";import{M as re,a as q}from"./index-epHOG_uQ.mjs";import{_ as ae}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as ie,Q as ne,b2 as se,br as me,at as f,au as g,av as r,n as s,a8 as o,aC as le,ap as v,aD as u,aG as D,az as pe,F as de,ay as ce}from"../jse/index-index-CulmqKVw.mjs";import{u as ue}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as fe}from"./use-drawer-0pSlBI5S.mjs";import{u as ge}from"./use-modal-BmBYziM1.mjs";import{P as ye}from"./index-BLw-otuj.mjs";import{g as Ce}from"./get-popup-container-BwMHEyJY.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./tree-select-panel.vue_vue_type_script_setup_true_lang-D0vP0S2i.mjs";import"./tree-DR0G1ezI.mjs";import"./index-CVEhXdRN.mjs";import"./index-DV03ZwLB.mjs";import"./Dropdown-XTxBxfwO.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const Tt=ie({__name:"index",setup(m){const i={commonConfig:{labelWidth:80},schema:J(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},a={checkboxConfig:{highlight:!0,reserve:!0,checkMethod:({row:t})=>t.roleId!==1},columns:X,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(c,k)=>h(this,[c,k],function*({page:t},e){return e!=null&&e.createTime?(e.params={beginTime:A(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:A(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield L(R({pageNum:t.currentPage,pageSize:t.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"roleId"},round:!0,align:"center",showOverflow:!0},y=ne(!1),[$,p]=ue({formOptions:i,gridOptions:a,gridEvents:{checkboxChange:t=>{y.value=t.records.length>0},checkboxAll:t=>{y.value=t.records.length>0}}}),[x,d]=fe({connectedComponent:ee});function l(){d.setData({}),d.open()}function C(t){return h(this,null,function*(){d.setData({id:t.roleId}),d.open()})}function S(t){return h(this,null,function*(){yield I(t.roleId),yield p.query()})}function Y(){const e=p.grid.getCheckboxRecords().map(c=>c.roleId);V.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>h(this,null,function*(){yield I(e),yield p.query()})})}const{hasAccessByCodes:z}=G(),[B,M]=ge({connectedComponent:Z});function E(t){M.setData({id:t.roleId}),M.open()}const P=U();function N(t){P.push(`/system/role-assign/${t.roleId}`)}return(t,e)=>{const c=se("a-button"),k=me("access");return f(),g(o(ae),{"auto-content-height":!0},{default:r(()=>[s(o($),null,{"toolbar-actions":r(()=>e[4]||(e[4]=[le("span",{class:"pl-[7px] text-[16px]"},"参数列表",-1)])),"toolbar-tools":r(()=>[s(o(te),null,{default:r(()=>[v((f(),g(c,{onClick:e[0]||(e[0]=n=>o(W)(o(H),"角色数据",{}))},{default:r(()=>[u(D(t.$t("pages.common.export")),1)]),_:1})),[[k,["system:role:export"],"code"]]),v((f(),g(c,{disabled:!y.value,danger:"",type:"primary",onClick:Y},{default:r(()=>[u(D(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[k,["system:role:remove"],"code"]]),v((f(),g(c,{type:"primary",onClick:l},{default:r(()=>[u(D(t.$t("pages.common.add")),1)]),_:1})),[[k,["system:role:add"],"code"]])]),_:1})]),status:r(({row:n})=>[s(o(Q),{modelValue:n.status,"onUpdate:modelValue":b=>n.status=b,api:()=>o(K)(n),disabled:n.roleId===1||n.roleKey==="admin"||!o(z)(["system:role:edit"]),reload:()=>o(p).query()},null,8,["modelValue","onUpdate:modelValue","api","disabled","reload"])]),action:r(({row:n})=>[n.roleId!==1?(f(),pe(de,{key:0},[v((f(),g(c,{size:"small",type:"link",onClick:T(b=>C(n),["stop"])},{default:r(()=>[u(D(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[k,["system:role:edit"],"code"]]),s(o(ye),{placement:"left",title:"确认删除？",onConfirm:b=>S(n)},{default:r(()=>[v((f(),g(c,{danger:"",size:"small",type:"link",onClick:e[1]||(e[1]=T(()=>{},["stop"]))},{default:r(()=>[u(D(t.$t("pages.common.delete")),1)]),_:1})),[[k,["system:role:remove"],"code"]])]),_:2},1032,["onConfirm"]),s(o(oe),{"get-popup-container":o(Ce),placement:"bottomRight"},{overlay:r(()=>[s(o(re),null,{default:r(()=>[s(o(q),{key:"1",onClick:b=>E(n)},{default:r(()=>e[5]||(e[5]=[u(" 数据权限 ")])),_:2},1032,["onClick"]),s(o(q),{key:"2",onClick:b=>N(n)},{default:r(()=>e[6]||(e[6]=[u(" 分配用户 ")])),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[s(c,{size:"small",type:"link"},{default:r(()=>e[7]||(e[7]=[u("更多")])),_:1})]),_:2},1032,["get-popup-container"])],64)):ce("",!0)]),_:1}),s(o(x),{onReload:e[2]||(e[2]=n=>o(p).query())}),s(o(B),{onReload:e[3]||(e[3]=n=>o(p).query())})]),_:1})}}});export{Tt as default};
