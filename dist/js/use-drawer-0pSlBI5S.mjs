var ye=Object.defineProperty,we=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var M=(o,e,t)=>e in o?ye(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,u=(o,e)=>{for(var t in e||(e={}))Y.call(e,t)&&M(o,t,e[t]);if(L)for(var t of L(e))q.call(e,t)&&M(o,t,e[t]);return o},$=(o,e)=>we(o,be(e));var k=(o,e)=>{var t={};for(var a in o)Y.call(o,a)&&e.indexOf(a)<0&&(t[a]=o[a]);if(o!=null&&L)for(var a of L(o))e.indexOf(a)<0&&q.call(o,a)&&(t[a]=o[a]);return t};var A=(o,e,t)=>M(o,typeof e!="symbol"?e+"":e,t);var G=(o,e,t)=>new Promise((a,l)=>{var r=i=>{try{w(t.next(i))}catch(h){l(h)}},m=i=>{try{w(t.throw(i))}catch(h){l(h)}},w=i=>i.done?a(i.value):Promise.resolve(i.value).then(r,m);w((t=t.apply(o,e)).next())});import{cr as ge,c8 as se,c9 as Ce,cb as ve,ca as De,a9 as Be,cc as Oe,cd as xe,cf as Se,cg as $e,ch as ke,ci as Ae,c5 as Ee,cj as Pe,ck as Ve,e as H,c4 as Te,c6 as Fe}from"./bootstrap-CIlPtDbU.mjs";import{a9 as g,at as d,au as f,av as p,as as _,aw as oe,ax as ae,a8 as s,V as ne,az as N,J as K,n as O,ay as b,ar as W,b5 as v,b4 as V,aK as Ie,a7 as re,Q as Re,W as Le,aC as z,aD as E,aG as P,be as je,i as Me,X as ze,h as Q,q as Ne}from"../jse/index-index-CulmqKVw.mjs";import{_ as Ke}from"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import{X as We}from"./x-BK4QZNWW.mjs";import{V as Je}from"./loading-7m7uS9S_.mjs";const Ue=ge("fixed z-[1000] bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 h-full w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),Xe=g({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const l=se(o,e);return(r,m)=>(d(),f(s(Ce),oe(ae(s(l))),{default:p(()=>[_(r.$slots,"default")]),_:3},16))}}),Ye=g({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(t,a)=>(d(),f(s(ve),oe(ae(e)),{default:p(()=>[_(t.$slots,"default")]),_:3},16))}}),qe=["data-dismissable-drawer"],Ge=g({__name:"SheetOverlay",setup(o){De();const e=ne("DISMISSABLE_DRAWER_ID");return(t,a)=>(d(),N("div",{"data-dismissable-drawer":s(e),class:"bg-overlay fixed inset-0 z-[1000]"},null,8,qe))}}),He=g({inheritAttrs:!1,__name:"SheetContent",props:{class:{},modal:{type:Boolean},open:{type:Boolean},side:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,a=e,l=K(()=>{const y=t,{class:m,modal:w,open:i,side:h}=y;return k(y,["class","modal","open","side"])}),r=se(l,a);return(m,w)=>(d(),f(s(xe),null,{default:p(()=>[O(Be,{name:"fade"},{default:p(()=>[m.open&&m.modal?(d(),f(Ge,{key:0})):b("",!0)]),_:1}),O(s(Oe),W({class:s(v)(s(Ue)({side:m.side}),"z-[1000]",t.class)},u(u({},s(r)),m.$attrs)),{default:p(()=>[_(m.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Z=g({__name:"SheetDescription",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,t=K(()=>{const r=e,{class:a}=r;return k(r,["class"])});return(a,l)=>(d(),f(s(Se),W({class:s(v)("text-muted-foreground text-sm",e.class)},t.value),{default:p(()=>[_(a.$slots,"default")]),_:3},16,["class"]))}}),Qe=g({__name:"SheetFooter",props:{class:{}},setup(o){const e=o;return(t,a)=>(d(),N("div",{class:V(s(v)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[_(t.$slots,"default")],2))}}),Ze=g({__name:"SheetHeader",props:{class:{}},setup(o){const e=o;return(t,a)=>(d(),N("div",{class:V(s(v)("flex flex-col text-center sm:text-left",e.class))},[_(t.$slots,"default")],2))}}),ee=g({__name:"SheetTitle",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,t=K(()=>{const r=e,{class:a}=r;return k(r,["class"])});return(a,l)=>(d(),f(s($e),W({class:s(v)("text-foreground font-medium",e.class)},t.value),{default:p(()=>[_(a.$slots,"default")]),_:3},16,["class"]))}}),et={class:"flex-center"},tt=g({__name:"drawer",props:{drawerApi:{default:void 0},cancelText:{},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},footer:{type:Boolean},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},title:{},titleTooltip:{}},setup(o){var I,X;const e=o,t=Ie();re("DISMISSABLE_DRAWER_ID",t);const a=Re(),{$t:l}=ke(),{isMobile:r}=Ae(),m=(X=(I=e.drawerApi)==null?void 0:I.useStore)==null?void 0:X.call(I),{cancelText:w,class:i,closable:h,closeOnClickModal:c,closeOnPressEscape:y,confirmLoading:D,confirmText:B,contentClass:le,description:T,footer:ie,loading:j,modal:ce,openAutoFocus:de,showCancelButton:ue,showConfirmButton:pe,title:F,titleTooltip:J}=Ee(e,m);Le(()=>j.value,n=>{n&&a.value&&a.value.scrollTo({top:0})});function fe(n){c.value||n.preventDefault()}function me(n){y.value||n.preventDefault()}function he(n){const C=n.target,R=C==null?void 0:C.dataset.dismissableDrawer;(!c.value||R!==t)&&n.preventDefault()}function _e(n){de.value||n==null||n.preventDefault()}function U(n){n.preventDefault(),n.stopPropagation()}return(n,C)=>{var R;return d(),f(s(Xe),{modal:!1,open:(R=s(m))==null?void 0:R.isOpen,"onUpdate:open":C[2]||(C[2]=()=>{var x;return(x=n.drawerApi)==null?void 0:x.close()})},{default:p(()=>{var x;return[O(s(He),{class:V(s(v)("flex w-[520px] flex-col",s(i),{"!w-full":s(r)})),modal:s(ce),open:(x=s(m))==null?void 0:x.isOpen,onCloseAutoFocus:U,onEscapeKeyDown:me,onFocusOutside:U,onInteractOutside:fe,onOpenAutoFocus:_e,onPointerDownOutside:he},{default:p(()=>[O(s(Ze),{class:V(s(v)("!flex flex-row items-center justify-between border-b px-6 py-5",{"px-4 py-3":s(h)}))},{default:p(()=>[z("div",null,[s(F)?(d(),f(s(ee),{key:0,class:"text-left"},{default:p(()=>[_(n.$slots,"title",{},()=>[E(P(s(F))+" ",1),s(J)?(d(),f(s(Pe),{key:0,"trigger-class":"pb-1"},{default:p(()=>[E(P(s(J)),1)]),_:1})):b("",!0)])]),_:3})):b("",!0),s(T)?(d(),f(s(Z),{key:1,class:"mt-1 text-xs"},{default:p(()=>[_(n.$slots,"description",{},()=>[E(P(s(T)),1)])]),_:3})):b("",!0)]),!s(F)||!s(T)?(d(),f(s(Ve),{key:0},{default:p(()=>[s(F)?b("",!0):(d(),f(s(ee),{key:0})),s(T)?b("",!0):(d(),f(s(Z),{key:1}))]),_:1})):b("",!0),z("div",et,[_(n.$slots,"extra"),s(h)?(d(),f(s(Ye),{key:0,"as-child":"",class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:p(()=>[O(s(Ke),null,{default:p(()=>[O(s(We),{class:"size-4"})]),_:1})]),_:1})):b("",!0)])]),_:3},8,["class"]),z("div",{ref_key:"wrapperRef",ref:a,class:V(s(v)("relative flex-1 overflow-y-auto p-3",s(le),{"overflow-hidden":s(j)}))},[s(j)?(d(),f(s(Je),{key:0,class:"size-full",spinning:""})):b("",!0),_(n.$slots,"default")],2),s(ie)?(d(),f(s(Qe),{key:0,class:"w-full flex-row items-center justify-end border-t p-2 px-3"},{default:p(()=>[_(n.$slots,"prepend-footer"),_(n.$slots,"footer",{},()=>[s(ue)?(d(),f(s(H),{key:0,variant:"ghost",onClick:C[0]||(C[0]=()=>{var S;return(S=n.drawerApi)==null?void 0:S.onCancel()})},{default:p(()=>[_(n.$slots,"cancelText",{},()=>[E(P(s(w)||s(l)("cancel")),1)])]),_:3})):b("",!0),s(pe)?(d(),f(s(H),{key:1,loading:s(D),onClick:C[1]||(C[1]=()=>{var S;return(S=n.drawerApi)==null?void 0:S.onConfirm()})},{default:p(()=>[_(n.$slots,"confirmText",{},()=>[E(P(s(B)||s(l)("confirm")),1)])]),_:3},8,["loading"])):b("",!0)]),_(n.$slots,"append-footer")]),_:3})):b("",!0)]),_:3},8,["class","modal","open"])]}),_:3},8,["open"])}}});class st{constructor(e={}){A(this,"api");A(this,"state");A(this,"sharedData",{payload:{}});A(this,"store");const h=e,{connectedComponent:t,onBeforeClose:a,onCancel:l,onConfirm:r,onOpenChange:m}=h,w=k(h,["connectedComponent","onBeforeClose","onCancel","onConfirm","onOpenChange"]),i={class:"",closable:!0,closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new Te(u(u({},i),w),{onUpdate:()=>{var y,D,B;const c=this.store.state;(c==null?void 0:c.isOpen)===((y=this.state)==null?void 0:y.isOpen)?this.state=c:(this.state=c,(B=(D=this.api).onOpenChange)==null||B.call(D,!!(c!=null&&c.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:l,onConfirm:r,onOpenChange:m},je(this)}batchStore(e){this.store.batch(e)}close(){var t,a,l;((l=(a=(t=this.api).onBeforeClose)==null?void 0:a.call(t))!=null?l:!0)&&this.store.setState(r=>$(u({},r),{isOpen:!1}))}drawerLoading(e){this.store.setState(t=>$(u({},t),{confirmLoading:e,loading:e}))}getData(){var e,t;return(t=(e=this.sharedData)==null?void 0:e.payload)!=null?t:{}}onCancel(){var e,t;this.api.onCancel?(t=(e=this.api).onCancel)==null||t.call(e):this.close()}onConfirm(){var e,t;(t=(e=this.api).onConfirm)==null||t.call(e)}open(){this.store.setState(e=>$(u({},e),{isOpen:!0}))}setData(e){this.sharedData.payload=e}setState(e){Me(e)?this.store.setState(e):this.store.setState(t=>u(u({},t),e))}}const te=Symbol("VBEN_DRAWER_INJECT");function dt(o={}){var w;const{connectedComponent:e}=o;if(e){const i=ze({});return[g((c,{attrs:y,slots:D})=>(re(te,{extendApi(B){Object.setPrototypeOf(i,B)},options:o}),ot(i,u(u(u({},c),y),D)),()=>Q(e,u(u({},c),y),D)),{inheritAttrs:!1,name:"VbenParentDrawer"}),i]}const t=ne(te,{}),a=u(u({},t.options),o);a.onOpenChange=i=>{var h,c,y;(h=o.onOpenChange)==null||h.call(o,i),(y=(c=t.options)==null?void 0:c.onOpenChange)==null||y.call(c,i)};const l=new st(a),r=l;r.useStore=i=>Fe(l.store,i);const m=g((i,{attrs:h,slots:c})=>()=>Q(tt,$(u(u({},i),h),{drawerApi:r}),c),{inheritAttrs:!1,name:"VbenDrawer"});return(w=t.extendApi)==null||w.call(t,r),[m,r]}function ot(o,e){return G(this,null,function*(){var l;if(!e||Object.keys(e).length===0)return;yield Ne();const t=(l=o==null?void 0:o.store)==null?void 0:l.state;if(!t)return;const a=new Set(Object.keys(t));for(const r of Object.keys(e))a.has(r)&&!["class"].includes(r)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${r}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{dt as u};
