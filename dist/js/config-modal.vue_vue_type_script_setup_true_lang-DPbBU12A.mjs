var m=(f,r,o)=>new Promise((t,c)=>{var d=e=>{try{i(o.next(e))}catch(s){c(s)}},n=e=>{try{i(o.throw(e))}catch(s){c(s)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(d,n);i((o=o.apply(f,r)).next())});import{K as b,$ as p}from"./bootstrap-CIlPtDbU.mjs";import{u as _}from"./vxe-table-CS5KFeE-.mjs";import{c as w,a as y,b as C}from"./index-YggHP7OK.mjs";import{g as N}from"./render-C5tDa4zc.mjs";import{g as S}from"./get-popup-container-BwMHEyJY.mjs";import{a9 as I,Q as k,J as v,a3 as T,at as x,au as V,av as q,n as B,a8 as g}from"../jse/index-index-CulmqKVw.mjs";import{u as D}from"./use-modal-BmBYziM1.mjs";const R=()=>[{component:"Input",fieldName:"configName",label:"参数名称"},{component:"Input",fieldName:"configKey",label:"参数键名"},{component:"Select",componentProps:{getPopupContainer:S,options:N(b.SYS_YES_NO)},fieldName:"configType",label:"系统内置"},{component:"RangePicker",fieldName:"createTime",label:"创建时间"}],U=[{type:"checkbox",width:60},{title:"用户名称",field:"userName"},{title:"消息内容",field:"content"},{title:"扣除费用",field:"deductCost"},{title:"累计Tokens",field:"totalTokens"},{title:"模型名称",field:"modelName"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],A=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"configId",label:"参数主键"},{component:"Input",fieldName:"configName",label:"参数名称",rules:"required"},{component:"Input",fieldName:"configKey",label:"参数键名",rules:"required"},{component:"Input",fieldName:"configValue",label:"参数键值",rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:N(b.SYS_YES_NO),optionType:"button"},defaultValue:"N",fieldName:"configType",label:"是否内置",rules:"required"},{component:"Textarea",fieldName:"remark",formItemClass:"items-baseline",label:"备注"}],$=I({__name:"config-modal",emits:["reload"],setup(f,{emit:r}){const o=r,t=k(!1),c=v(()=>t.value?p("pages.common.edit"):p("pages.common.add")),[d,n]=_({commonConfig:{labelWidth:80},schema:A(),showDefaultActions:!1}),[i,e]=D({fullscreenButton:!1,onCancel:u,onConfirm:s,onOpenChange:l=>m(this,null,function*(){if(!l)return null;e.modalLoading(!0);const{id:a}=e.getData();if(t.value=!!a,t.value&&a){const h=yield w(a);yield n.setValues(h)}e.modalLoading(!1)})});function s(){return m(this,null,function*(){try{e.modalLoading(!0);const{valid:l}=yield n.validate();if(!l)return;const a=T(yield n.getValues());yield t.value?y(a):C(a),o("reload"),yield u()}catch(l){console.error(l)}finally{e.modalLoading(!1)}})}function u(){return m(this,null,function*(){e.close(),yield n.resetForm()})}return(l,a)=>(x(),V(g(i),{"close-on-click-modal":!1,title:c.value,class:"w-[550px]"},{default:q(()=>[B(g(d))]),_:1},8,["title"]))}});export{$ as _,U as c,R as q};
