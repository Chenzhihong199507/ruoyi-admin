var z=Object.defineProperty;var D=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(p,t,o)=>t in p?z(p,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):p[t]=o,$=(p,t)=>{for(var o in t||(t={}))A.call(t,o)&&_(p,o,t[o]);if(D)for(var o of D(t))B.call(t,o)&&_(p,o,t[o]);return p};var c=(p,t,o)=>new Promise((k,l)=>{var x=i=>{try{y(o.next(i))}catch(v){l(v)}},n=i=>{try{y(o.throw(i))}catch(v){l(v)}},y=i=>i.done?k(i.value):Promise.resolve(i.value).then(x,n);y((o=o.apply(p,t)).next())});import{aq as E,M as N,bC as T}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{q as O,_ as j,p as G,a as q,c as F,b as H}from"./post-drawer.vue_vue_type_script_setup_true_lang-Cn11HghI.mjs";import{d as L}from"./download-BHYXKq0m.mjs";import{_ as Q}from"./dept-tree.vue_vue_type_script_setup_true_lang-DklYYW4o.mjs";import{S as I}from"./index-BLUbi1M4.mjs";import{_ as U}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as W,Q as M,b2 as J,br as K,at as u,au as f,av as a,n as g,a8 as s,aC as X,ap as h,aD as b,aG as w}from"../jse/index-index-CulmqKVw.mjs";import{u as Z}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as V}from"./use-drawer-0pSlBI5S.mjs";import{P as ee}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./index-DxROXI-t.mjs";import"./get-popup-container-BwMHEyJY.mjs";import"./tree-DR0G1ezI.mjs";import"./index-CVEhXdRN.mjs";import"./index-BmGsg0FM.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const pt=W({__name:"index",setup(p){const t=M([]),o={commonConfig:{labelWidth:80},schema:O(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",handleReset:()=>c(this,null,function*(){t.value=[],yield n.query()})},k={checkboxConfig:{highlight:!0,reserve:!0,trigger:"cell"},columns:F,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(m,C)=>c(this,[m,C],function*({page:r},e){return e!=null&&e.createTime?(e.params={beginTime:T(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:T(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),t.value.length===1?e.deptId=t.value[0]:Reflect.deleteProperty(e,"deptId"),yield H($({pageNum:r.currentPage,pageSize:r.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"postId"},round:!0,align:"center",showOverflow:!0},l=M(!1),[x,n]=Z({formOptions:o,gridOptions:k,gridEvents:{checkboxChange:r=>{l.value=r.records.length>0},checkboxAll:r=>{l.value=r.records.length>0}}}),[y,i]=V({connectedComponent:j});function v(){i.setData({}),i.open()}function S(r){return c(this,null,function*(){i.setData({id:r.postId}),i.open()})}function Y(r){return c(this,null,function*(){yield q(r.postId),yield n.query()})}function P(){const e=n.grid.getCheckboxRecords().map(m=>m.postId);N.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>c(this,null,function*(){yield q(e),yield n.reload()})})}return(r,e)=>{const m=J("a-button"),C=K("access");return u(),f(s(U),{"auto-content-height":!0,"content-class":"flex gap-[8px]"},{default:a(()=>[g(Q,{"select-dept-id":t.value,"onUpdate:selectDeptId":e[0]||(e[0]=d=>t.value=d),height:300,class:"w-[260px]",onSelect:e[1]||(e[1]=()=>s(n).query())},null,8,["select-dept-id"]),g(s(x),{class:"flex-1 overflow-hidden"},{"toolbar-actions":a(()=>e[5]||(e[5]=[X("span",{class:"pl-[7px] text-[16px]"},"岗位列表",-1)])),"toolbar-tools":a(()=>[g(s(I),null,{default:a(()=>[h((u(),f(m,{onClick:e[2]||(e[2]=d=>s(L)(s(G),"岗位信息数据",{}))},{default:a(()=>[b(w(r.$t("pages.common.export")),1)]),_:1})),[[C,["system:post:export"],"code"]]),h((u(),f(m,{disabled:!l.value,danger:"",type:"primary",onClick:P},{default:a(()=>[b(w(r.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[C,["system:post:remove"],"code"]]),h((u(),f(m,{type:"primary",onClick:v},{default:a(()=>[b(w(r.$t("pages.common.add")),1)]),_:1})),[[C,["system:post:add"],"code"]])]),_:1})]),action:a(({row:d})=>[g(s(I),null,{default:a(()=>[h((u(),f(m,{size:"small",type:"link",onClick:R=>S(d)},{default:a(()=>[b(w(r.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[C,["system:post:edit"],"code"]]),g(s(ee),{placement:"left",title:"确认删除？",onConfirm:R=>Y(d)},{default:a(()=>[h((u(),f(m,{danger:"",size:"small",type:"link",onClick:e[3]||(e[3]=E(()=>{},["stop"]))},{default:a(()=>[b(w(r.$t("pages.common.delete")),1)]),_:1})),[[C,["system:post:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1}),g(s(y),{onReload:e[4]||(e[4]=d=>s(n).query())})]),_:1})}}});export{pt as default};
