var q=Object.defineProperty;var M=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(t,r,o)=>r in t?q(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,$=(t,r)=>{for(var o in r||(r={}))L.call(r,o)&&T(t,o,r[o]);if(M)for(var o of M(r))N.call(r,o)&&T(t,o,r[o]);return t};var d=(t,r,o)=>new Promise((c,f)=>{var h=n=>{try{m(o.next(n))}catch(l){f(l)}},v=n=>{try{m(o.throw(n))}catch(l){f(l)}},m=n=>n.done?c(n.value):Promise.resolve(n.value).then(h,v);m((o=o.apply(t,r)).next())});import{bN as O,I as y,$ as C,aq as P,M as B,bC as Y}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{d as E}from"./download-BHYXKq0m.mjs";import{c as z}from"./modal-DLi87ChR.mjs";import{q as A,_ as I,c as R}from"./OperationPreviewDrawer.vue_vue_type_script_setup_true_lang-DGdAQ8tn.mjs";import{S as W}from"./index-BLUbi1M4.mjs";import{_ as j}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as G,Q as F,b2 as H,br as Q,at as g,au as u,av as p,n as k,a8 as a,aC as J,ap as _,aD as w,aG as b}from"../jse/index-index-CulmqKVw.mjs";import{u as K}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as U}from"./use-drawer-0pSlBI5S.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./index-DIf6jAjs.mjs";import"./useDescription-D4BFEr9E.mjs";import"./index-hMhHosxt.mjs";import"./index-D6mTUP6j.mjs";import"./index-BA6odBth.mjs";import"./Dropdown-XTxBxfwO.mjs";import"./pick-TUD3VTZU.mjs";import"./index-BmGsg0FM.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";function X(t){return y.get("/monitor/operlog/list",{params:t})}function Z(t){return y.deleteWithMsg(`/monitor/operlog/${t}`)}function V(){return y.deleteWithMsg("/monitor/operlog/clean")}function oo(t){return O("/monitor/operlog/export",t)}const se=G({__name:"index",setup(t){const r={commonConfig:{labelWidth:80},schema:A(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={checkboxConfig:{highlight:!0,reserve:!0,trigger:"row"},columns:R,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(s,...x)=>d(this,[s,...x],function*({page:i},e={}){return e!=null&&e.createTime?(e.params={beginTime:Y(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:Y(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield X($({pageNum:i.currentPage,pageSize:i.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"operId"},round:!0,align:"center",showOverflow:!0},c=F(!1),[f,h]=K({formOptions:r,gridOptions:o,gridEvents:{checkboxChange:i=>{c.value=i.records.length>0},checkboxAll:i=>{c.value=i.records.length>0}}}),[v,m]=U({connectedComponent:I});function n(i){m.setData({record:i}),m.open()}function l(){z({onValidated:()=>d(this,null,function*(){yield V()})})}function S(){return d(this,null,function*(){const e=h.grid.getCheckboxRecords().map(s=>s.operId);B.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条操作日志吗？`,onOk:()=>d(this,null,function*(){yield Z(e),yield h.query()})})})}return(i,e)=>{const s=H("a-button"),x=Q("access");return g(),u(a(j),{"auto-content-height":!0},{default:p(()=>[k(a(f),null,{"toolbar-actions":p(()=>e[1]||(e[1]=[J("span",{class:"pl-[7px] text-[16px]"},"操作日志列表",-1)])),"toolbar-tools":p(()=>[k(a(W),null,{default:p(()=>[_((g(),u(s,{onClick:l},{default:p(()=>[w(b(a(C)("pages.common.clear")),1)]),_:1})),[[x,["monitor:operlog:remove"],"code"]]),_((g(),u(s,{onClick:e[0]||(e[0]=D=>a(E)(a(oo),"操作日志",{}))},{default:p(()=>[w(b(a(C)("pages.common.export")),1)]),_:1})),[[x,["monitor:operlog:export"],"code"]]),_((g(),u(s,{disabled:!c.value,danger:"",type:"primary",onClick:S},{default:p(()=>[w(b(a(C)("pages.common.delete")),1)]),_:1},8,["disabled"])),[[x,["monitor:operlog:remove"],"code"]])]),_:1})]),action:p(({row:D})=>[_((g(),u(s,{size:"small",type:"link",onClick:P(eo=>n(D),["stop"])},{default:p(()=>[w(b(a(C)("pages.common.preview")),1)]),_:2},1032,["onClick"])),[[x,["monitor:operlog:list"],"code"]])]),_:1}),k(a(v))]),_:1})}}});export{se as default};
