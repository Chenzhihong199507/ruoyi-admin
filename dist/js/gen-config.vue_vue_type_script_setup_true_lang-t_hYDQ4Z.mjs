var j=Object.defineProperty,I=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var T=(e,t,l)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,C=(e,t)=>{for(var l in t||(t={}))L.call(t,l)&&T(e,l,t[l]);if(w)for(var l of w(t))U.call(t,l)&&T(e,l,t[l]);return e},x=(e,t)=>I(e,N(t));var h=(e,t,l)=>new Promise((i,s)=>{var v=o=>{try{a(l.next(o))}catch(n){s(n)}},u=o=>{try{a(l.throw(o))}catch(n){s(n)}},a=o=>o.done?i(o.value):Promise.resolve(o.value).then(v,u);a((l=l.apply(e,t)).next())});import"./vxe-table-CS5KFeE-.mjs";import{e as P}from"./index-CS4ZLkSY.mjs";import{t as q}from"./mitt-DZbos8MC.mjs";import{g as F}from"./dict-type-SUN05zMk.mjs";import{I as E}from"./index-MMlqTCj9.mjs";import{S as c}from"./index-B-WsVPHD.mjs";import{C as V}from"./index-yiE2I97I.mjs";import{X as G,n as r,a9 as J,V as $,b2 as z,at as K,az as M,a8 as f,aC as Q,av as g,aD as O}from"../jse/index-index-CulmqKVw.mjs";import{g as m}from"./get-popup-container-BwMHEyJY.mjs";import{S as W}from"./index-BLUbi1M4.mjs";import{k as A,c0 as H}from"./bootstrap-CIlPtDbU.mjs";import{u as X}from"./use-vxe-grid-CIpB4HOm.mjs";const Y=["Long","String","Integer","Double","BigDecimal","Date","Boolean","LocalDate","LocalDateTime"],k=[{label:"=",value:"EQ"},{label:"!=",value:"NE"},{label:">",value:"GT"},{label:">=",value:"GE"},{label:"<",value:"LT"},{label:"<=",value:"LE"},{label:"LIKE",value:"LIKE"},{label:"BETWEEN",value:"BETWEEN"}],B=[{label:"文本框",value:"input"},{label:"文本域",value:"textarea"},{label:"下拉框",value:"select"},{label:"单选框",value:"radio"},{label:"复选框",value:"checkbox"},{label:"日期控件",value:"datetime"},{label:"图片上传",value:"imageUpload"},{label:"文件上传",value:"fileUpload"},{label:"富文本",value:"editor"}],b=G([{label:"未设置",value:""}]);(function(){return h(this,null,function*(){(yield F()).forEach(l=>{const i={label:`${l.dictName} | ${l.dictType}`,value:l.dictType};b.push(i)})})})();function d(e,t){const l=e[t]?"是":"否",i=e[t]?"text-green-500":"text-red-500";return r("span",{class:i},[l])}function p(e,t){return r(V,{checked:e[t],"onUpdate:checked":l=>e[t]=l},null)}const Z={columnComment:[{required:!0,message:"请输入"}],javaField:[{required:!0,message:"请输入"}]},ee=[{title:"序号",type:"seq",fixed:"left",width:"50",align:"center"},{title:"字段列名",field:"columnName",showOverflow:"tooltip",fixed:"left",width:150},{title:"字段描述",field:"columnComment",width:150,slots:{edit:({row:e})=>r(E,{value:e.columnComment,"onUpdate:value":t=>e.columnComment=t},null)},editRender:{}},{title:"db类型",field:"columnType",width:120,showOverflow:"tooltip"},{title:"Java类型",field:"javaType",width:150,slots:{edit:({row:e})=>{const t=Y.map(l=>({label:l,value:l}));return r(c,{class:"w-full",getPopupContainer:m,options:t,value:e.javaType,"onUpdate:value":l=>e.javaType=l},null)}},editRender:{}},{title:"Java属性名",field:"javaField",width:150,showOverflow:"tooltip",slots:{edit:({row:e})=>r(E,{value:e.javaField,"onUpdate:value":t=>e.javaField=t},null)},editRender:{}},{title:"插入",field:"insert",width:80,showOverflow:"tooltip",align:"center",slots:{default:({row:e})=>d(e,"insert"),edit:({row:e})=>p(e,"insert")},editRender:{}},{title:"编辑",field:"edit",showOverflow:"tooltip",align:"center",width:80,slots:{default:({row:e})=>d(e,"edit"),edit:({row:e})=>p(e,"edit")},editRender:{}},{title:"列表",field:"list",showOverflow:"tooltip",align:"center",width:80,slots:{default:({row:e})=>d(e,"list"),edit:({row:e})=>p(e,"list")},editRender:{}},{title:"查询",field:"query",showOverflow:"tooltip",align:"center",width:80,slots:{default:({row:e})=>d(e,"query"),edit:({row:e})=>p(e,"query")},editRender:{}},{title:"查询方式",field:"queryType",showOverflow:"tooltip",align:"center",width:150,slots:{default:({row:e})=>{const t=e.queryType,l=k.find(i=>i.value===t);return l?l.label:t},edit:({row:e})=>r(c,{class:"w-full",getPopupContainer:m,options:k,value:e.queryType,"onUpdate:value":t=>e.queryType=t},null)},editRender:{}},{title:"必填",field:"required",showOverflow:"tooltip",align:"center",width:80,slots:{default:({row:e})=>d(e,"required"),edit:({row:e})=>p(e,"required")},editRender:{}},{title:"显示类型",field:"htmlType",showOverflow:"tooltip",width:150,align:"center",slots:{default:({row:e})=>{const t=e.htmlType,l=B.find(i=>i.value===t);return l?l.label:t},edit:({row:e})=>r(c,{class:"w-full",getPopupContainer:m,options:B,value:e.htmlType,"onUpdate:value":t=>e.htmlType=t},null)},editRender:{}},{title:"字典类型",field:"dictType",showOverflow:"tooltip",width:230,align:"center",titlePrefix:{message:"仅'下拉框', '单选框', '复选框'支持字典类型"},slots:{default:({row:e})=>{const t=e.dictType,l=b.find(i=>i.value===t);return l?l.label:t},edit:({row:e})=>{const t=()=>{e.dictType=""},l=e.htmlType!=="select"&&e.htmlType!=="radio"&&e.htmlType!=="checkbox";return r(c,{allowClear:!0,class:"w-full",disabled:l,getPopupContainer:m,onDeselect:t,options:b,placeholder:"请选择字典类型",value:e.dictType,"onUpdate:value":i=>e.dictType=i},null)}},editRender:{}}],te={class:"flex flex-col gap-[16px] p-[12px]"},le={class:"flex justify-center"},ye=J({__name:"gen-config",setup(e){const t=$("genInfoData"),l={columns:ee,keepSource:!0,editConfig:{trigger:"click",mode:"cell",showStatus:!0},editRules:Z,rowConfig:{isHover:!0,keyField:"id",isCurrent:!0},columnConfig:{resizable:!0},proxyConfig:{enabled:!0},data:t.value.columns,round:!0,align:"center",showOverflow:!0},[i,s]=X({gridOptions:l});function v(){return h(this,null,function*(){try{if(yield s.grid.validate()){A.error("校验未通过");return}const a=H(f(t));if(a.columns=s.grid.getData(),a&&a.tplCategory==="tree"){const{treeCode:o,treeName:n,treeParentCode:y}=a;a.params={treeCode:o,treeName:n,treeParentCode:y}}if(a){const o=n=>n?"1":"0";a.columns.forEach(n=>{const{edit:y,insert:R,query:D,required:_,list:S}=n;n.isInsert=o(R),n.isEdit=o(y),n.isList=o(S),n.isQuery=o(D),n.isRequired=o(_)}),a.params=x(C({},a.params),{parentMenuId:a.parentMenuId,popupComponent:a.popupComponent})}yield P(a),q(2)}catch(u){console.error(u)}})}return(u,a)=>{const o=z("a-button");return K(),M("div",te,[r(f(i)),Q("div",le,[r(f(W),null,{default:g(()=>[r(o,{onClick:a[0]||(a[0]=n=>f(q)(0))},{default:g(()=>a[1]||(a[1]=[O("上一步")])),_:1}),r(o,{type:"primary",onClick:v},{default:g(()=>a[2]||(a[2]=[O("下一步")])),_:1})]),_:1})])])}}});export{ye as _};
