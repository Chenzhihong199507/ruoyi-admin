var m=(e,p,a)=>new Promise((n,d)=>{var f=t=>{try{l(a.next(t))}catch(c){d(c)}},i=t=>{try{l(a.throw(t))}catch(c){d(c)}},l=t=>t.done?n(t.value):Promise.resolve(t.value).then(f,i);l((a=a.apply(e,p)).next())});import{I as u,K as r,$ as y}from"./bootstrap-CIlPtDbU.mjs";import{u as w}from"./vxe-table-CS5KFeE-.mjs";import{g,r as T}from"./render-C5tDa4zc.mjs";import{g as C}from"./get-popup-container-BwMHEyJY.mjs";import{a9 as b,Q as N,J as I,a3 as v,at as E,au as P,av as Y,n as q,a8 as _}from"../jse/index-index-CulmqKVw.mjs";import{u as x}from"./use-modal-BmBYziM1.mjs";function k(e){return u.get("/system/notice/list",{params:e})}function B(e){return u.get(`/system/notice/${e}`)}function O(e){return u.postWithMsg("/system/notice",e)}function V(e){return u.putWithMsg("/system/notice",e)}function W(e){return u.deleteWithMsg(`/system/notice/${e}`)}const G=()=>[{component:"Input",fieldName:"noticeTitle",label:"公告标题"},{component:"Input",fieldName:"createBy",label:"创建人"},{component:"Select",componentProps:{getPopupContainer:C,options:g(r.SYS_NOTICE_TYPE)},fieldName:"noticeType",label:"公告类型"}],J=[{type:"checkbox",width:60},{title:"公告标题",field:"noticeTitle"},{title:"公告类型",field:"noticeType",width:120,slots:{default:({row:e})=>T(e.noticeType,r.SYS_NOTICE_TYPE)}},{title:"状态",field:"status",width:120,slots:{default:({row:e})=>T(e.status,r.SYS_NOTICE_STATUS)}},{title:"创建人",field:"createByName",width:150},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],A=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"noticeId",label:"主键"},{component:"Input",fieldName:"noticeTitle",formItemClass:"col-span-2",label:"公告标题",rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",class:"grid-cols-2",options:g(r.SYS_NOTICE_STATUS),optionType:"button"},defaultValue:"0",fieldName:"status",label:"公告状态",rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",class:"grid-cols-2",options:g(r.SYS_NOTICE_TYPE),optionType:"button"},defaultValue:"1",fieldName:"noticeType",label:"公告类型",rules:"required"},{component:"RichTextarea",componentProps:{width:"100%"},fieldName:"noticeContent",formItemClass:"col-span-2",label:"公告内容",rules:"required"}],K=b({__name:"notice-modal",emits:["reload"],setup(e,{emit:p}){const a=p,n=N(!1),d=I(()=>n.value?y("pages.common.edit"):y("pages.common.add")),[f,i]=w({layout:"vertical",schema:A(),showDefaultActions:!1,wrapperClass:"grid-cols-2"}),[l,t]=x({fullscreenButton:!1,onCancel:h,onConfirm:c,onOpenChange:s=>m(this,null,function*(){if(!s)return null;t.modalLoading(!0);const{id:o}=t.getData();if(n.value=!!o,n.value&&o){const S=yield B(o);yield i.setValues(S)}t.modalLoading(!1)})});function c(){return m(this,null,function*(){try{t.modalLoading(!0);const{valid:s}=yield i.validate();if(!s)return;const o=v(yield i.getValues());yield n.value?V(o):O(o),a("reload"),yield h()}catch(s){console.error(s)}finally{t.modalLoading(!1)}})}function h(){return m(this,null,function*(){t.close(),yield i.resetForm()})}return(s,o)=>(E(),P(_(l),{"fullscreen-button":!0,title:d.value,class:"w-[800px]"},{default:Y(()=>[q(_(f))]),_:1},8,["title"]))}});export{K as _,k as a,J as c,W as n,G as q};
