var b=(m,l,a)=>new Promise((u,o)=>{var c=n=>{try{r(a.next(n))}catch(e){o(e)}},g=n=>{try{r(a.throw(n))}catch(e){o(e)}},r=n=>n.done?u(n.value):Promise.resolve(n.value).then(c,g);r((a=a.apply(m,l)).next())});import{u as N,c as S,$ as t,T as v,e as _,s as C}from"./bootstrap-CIlPtDbU.mjs";import{a9 as B,X as w,J as $,at as k,az as V,n as d,av as f,aC as x,as as T,aD as p,aG as h,a8 as s,b4 as y,Q as L,au as P}from"../jse/index-index-CulmqKVw.mjs";const D={class:"text-muted-foreground"},z=B({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(m,{emit:l}){const a=m,u=l,o=N(),[c,{validate:g}]=S(w({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:$(()=>a.formSchema),showDefaultActions:!1}));function r(){return b(this,null,function*(){const{valid:e,values:i}=yield g();e&&u("submit",{code:i==null?void 0:i.code,phoneNumber:i==null?void 0:i.phoneNumber})})}function n(){o.push(a.loginPath)}return(e,i)=>(k(),V("div",null,[d(v,null,{desc:f(()=>[x("span",D,[T(e.$slots,"subTitle",{},()=>[p(h(e.subTitle||s(t)("authentication.codeSubtitle")),1)])])]),default:f(()=>[T(e.$slots,"title",{},()=>[p(h(e.title||s(t)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),d(s(c)),d(s(_),{class:y([{"cursor-wait":e.loading},"w-full"]),loading:e.loading,onClick:r},{default:f(()=>[T(e.$slots,"submitButtonText",{},()=>[p(h(e.submitButtonText||s(t)("common.login")),1)])]),_:3},8,["class","loading"]),d(s(_),{class:"mt-4 w-full",variant:"outline",onClick:i[0]||(i[0]=A=>n())},{default:f(()=>[p(h(s(t)("common.back")),1)]),_:1})]))}}),R=B({name:"CodeLogin",__name:"code-login",setup(m){const l=L(!1),a=$(()=>[{component:"VbenInput",componentProps:{placeholder:t("authentication.mobile")},fieldName:"phoneNumber",label:t("authentication.mobile"),rules:C().min(1,{message:t("authentication.mobileTip")}).refine(o=>/^\d{11}$/.test(o),{message:t("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{createText:o=>o>0?t("authentication.sendText",[o]):t("authentication.sendCode"),placeholder:t("authentication.code")},fieldName:"code",label:t("authentication.code"),rules:C().min(1,{message:t("authentication.codeTip")})}]);function u(o){return b(this,null,function*(){console.log(o)})}return(o,c)=>(k(),P(s(z),{"form-schema":a.value,loading:l.value,onSubmit:u},null,8,["form-schema","loading"]))}});export{R as default};
