import{P as me,bk as sn,z as w,aQ as Dt,q as ae,r as pe,a2 as dn,aR as cn,aZ as Nt,x as Pt,y as Tt,A as _e,aD as nt,b9 as It,v as un,a9 as fn,B as vn,aS as we,aA as He,bc as yn,a3 as hn}from"./bootstrap-CIlPtDbU.mjs";import{a9 as De,a7 as Lt,J as N,V as Mt,aa as H,n as E,X as At,ak as _t,o as pn,x as gn,Q as Fe,ab as Ce,W as Ke,q as Ft,ac as bn,ap as mn,F as Kn,k as ut,ao as Sn,ai as xn}from"../jse/index-index-CulmqKVw.mjs";import{L as kn}from"./List-B93VJ5nE.mjs";import{e as se}from"./eagerComputed-Bboi8kUT.mjs";import{c as wn,g as Cn}from"./collapseMotion-BYkmK0aG.mjs";const Bt=Symbol("TreeContextKey"),$n=De({compatConfig:{MODE:3},name:"TreeContext",props:{value:{type:Object}},setup(e,t){let{slots:n}=t;return Lt(Bt,N(()=>e.value)),()=>{var o;return(o=n.default)===null||o===void 0?void 0:o.call(n)}}}),at=()=>Mt(Bt,N(()=>({}))),jt=Symbol("KeysStateKey"),On=e=>{Lt(jt,e)},Ht=()=>Mt(jt,{expandedKeys:H([]),selectedKeys:H([]),loadedKeys:H([]),loadingKeys:H([]),checkedKeys:H([]),halfCheckedKeys:H([]),expandedKeysSet:N(()=>new Set),selectedKeysSet:N(()=>new Set),loadedKeysSet:N(()=>new Set),loadingKeysSet:N(()=>new Set),checkedKeysSet:N(()=>new Set),halfCheckedKeysSet:N(()=>new Set),flattenNodes:H([])}),En=e=>{let{prefixCls:t,level:n,isStart:o,isEnd:a}=e;const s=`${t}-indent-unit`,l=[];for(let v=0;v<n;v+=1)l.push(E("span",{key:v,class:{[s]:!0,[`${s}-start`]:o[v],[`${s}-end`]:a[v]}},null));return E("span",{"aria-hidden":"true",class:`${t}-indent`},[l])},Rt={eventKey:[String,Number],prefixCls:String,title:me.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:me.any,switcherIcon:me.any,domRef:{type:Function}},Dn={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},Nn=()=>({prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:me.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:me.any,selectable:{type:Boolean,default:void 0},expandAction:[String,Boolean],disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:me.any,switcherIcon:me.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String},rootClassName:String,rootStyle:Object});var Pn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const ft="open",vt="close",Tn="---",yt=De({compatConfig:{MODE:3},name:"ATreeNode",inheritAttrs:!1,props:Rt,isTreeNode:1,setup(e,t){let{attrs:n,slots:o,expose:a}=t;sn(!("slots"in e.data),`treeData slots is deprecated, please use ${Object.keys(e.data.slots||{}).map(r=>"`v-slot:"+r+"` ")}instead`);const s=H(!1),l=at(),{expandedKeysSet:v,selectedKeysSet:g,loadedKeysSet:f,loadingKeysSet:y,checkedKeysSet:h,halfCheckedKeysSet:b}=Ht(),{dragOverNodeKey:m,dropPosition:C,keyEntities:p}=l.value,k=N(()=>Be(e.eventKey,{expandedKeysSet:v.value,selectedKeysSet:g.value,loadedKeysSet:f.value,loadingKeysSet:y.value,checkedKeysSet:h.value,halfCheckedKeysSet:b.value,dragOverNodeKey:m,dropPosition:C,keyEntities:p})),K=se(()=>k.value.expanded),A=se(()=>k.value.selected),M=se(()=>k.value.checked),P=se(()=>k.value.loaded),T=se(()=>k.value.loading),U=se(()=>k.value.halfChecked),q=se(()=>k.value.dragOver),F=se(()=>k.value.dragOverGapTop),R=se(()=>k.value.dragOverGapBottom),X=se(()=>k.value.pos),V=H(),ne=N(()=>{const{eventKey:r}=e,{keyEntities:c}=l.value,{children:_}=c[r]||{};return!!(_||[]).length}),J=N(()=>{const{isLeaf:r}=e,{loadData:c}=l.value,_=ne.value;return r===!1?!1:r||!c&&!_||c&&P.value&&!_}),ve=N(()=>J.value?null:K.value?ft:vt),le=N(()=>{const{disabled:r}=e,{disabled:c}=l.value;return!!(c||r)}),xe=N(()=>{const{checkable:r}=e,{checkable:c}=l.value;return!c||r===!1?!1:c}),re=N(()=>{const{selectable:r}=e,{selectable:c}=l.value;return typeof r=="boolean"?r:c}),z=N(()=>{const{data:r,active:c,checkable:_,disableCheckbox:G,disabled:Y,selectable:Q}=e;return w(w({active:c,checkable:_,disableCheckbox:G,disabled:Y,selectable:Q},r),{dataRef:r,data:r,isLeaf:J.value,checked:M.value,expanded:K.value,loading:T.value,selected:A.value,halfChecked:U.value})}),de=gn(),W=N(()=>{const{eventKey:r}=e,{keyEntities:c}=l.value,{parent:_}=c[r]||{};return w(w({},je(w({},e,k.value))),{parent:_})}),Z=At({eventData:W,eventKey:N(()=>e.eventKey),selectHandle:V,pos:X,key:de.vnode.key});a(Z);const oe=r=>{const{onNodeDoubleClick:c}=l.value;c(r,W.value)},ce=r=>{if(le.value)return;const{onNodeSelect:c}=l.value;r.preventDefault(),c(r,W.value)},ge=r=>{if(le.value)return;const{disableCheckbox:c}=e,{onNodeCheck:_}=l.value;if(!xe.value||c)return;r.preventDefault();const G=!M.value;_(r,W.value,G)},ke=r=>{const{onNodeClick:c}=l.value;c(r,W.value),re.value?ce(r):ge(r)},$e=r=>{const{onNodeMouseEnter:c}=l.value;c(r,W.value)},Re=r=>{const{onNodeMouseLeave:c}=l.value;c(r,W.value)},ze=r=>{const{onNodeContextMenu:c}=l.value;c(r,W.value)},Ve=r=>{const{onNodeDragStart:c}=l.value;r.stopPropagation(),s.value=!0,c(r,Z);try{r.dataTransfer.setData("text/plain","")}catch(_){}},We=r=>{const{onNodeDragEnter:c}=l.value;r.preventDefault(),r.stopPropagation(),c(r,Z)},Ge=r=>{const{onNodeDragOver:c}=l.value;r.preventDefault(),r.stopPropagation(),c(r,Z)},Pe=r=>{const{onNodeDragLeave:c}=l.value;r.stopPropagation(),c(r,Z)},qe=r=>{const{onNodeDragEnd:c}=l.value;r.stopPropagation(),s.value=!1,c(r,Z)},Xe=r=>{const{onNodeDrop:c}=l.value;r.preventDefault(),r.stopPropagation(),s.value=!1,c(r,Z)},Te=r=>{const{onNodeExpand:c}=l.value;T.value||c(r,W.value)},Ie=()=>{const{data:r}=e,{draggable:c}=l.value;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(r)))},Le=()=>{const{draggable:r,prefixCls:c}=l.value;return r&&(r!=null&&r.icon)?E("span",{class:`${c}-draggable-icon`},[r.icon]):null},Ue=()=>{var r,c,_;const{switcherIcon:G=o.switcherIcon||((r=l.value.slots)===null||r===void 0?void 0:r[(_=(c=e.data)===null||c===void 0?void 0:c.slots)===null||_===void 0?void 0:_.switcherIcon])}=e,{switcherIcon:Y}=l.value,Q=G||Y;return typeof Q=="function"?Q(z.value):Q},Me=()=>{const{loadData:r,onNodeLoad:c}=l.value;T.value||r&&K.value&&!J.value&&!ne.value&&!P.value&&c(W.value)};_t(()=>{Me()}),pn(()=>{Me()});const Ye=()=>{const{prefixCls:r}=l.value,c=Ue();if(J.value)return c!==!1?E("span",{class:pe(`${r}-switcher`,`${r}-switcher-noop`)},[c]):null;const _=pe(`${r}-switcher`,`${r}-switcher_${K.value?ft:vt}`);return c!==!1?E("span",{onClick:Te,class:_},[c]):null},Qe=()=>{var r,c;const{disableCheckbox:_}=e,{prefixCls:G}=l.value,Y=le.value;return xe.value?E("span",{class:pe(`${G}-checkbox`,M.value&&`${G}-checkbox-checked`,!M.value&&U.value&&`${G}-checkbox-indeterminate`,(Y||_)&&`${G}-checkbox-disabled`),onClick:ge},[(c=(r=l.value).customCheckable)===null||c===void 0?void 0:c.call(r)]):null},Ae=()=>{const{prefixCls:r}=l.value;return E("span",{class:pe(`${r}-iconEle`,`${r}-icon__${ve.value||"docu"}`,T.value&&`${r}-icon_loading`)},null)},be=()=>{const{disabled:r,eventKey:c}=e,{draggable:_,dropLevelOffset:G,dropPosition:Y,prefixCls:Q,indent:i,dropIndicatorRender:d,dragOverNodeKey:u,direction:x}=l.value;return!r&&_!==!1&&u===c?d({dropPosition:Y,dropLevelOffset:G,indent:i,prefixCls:Q,direction:x}):null},Je=()=>{var r,c,_,G,Y,Q;const{icon:i=o.icon,data:d}=e,u=o.title||((r=l.value.slots)===null||r===void 0?void 0:r[(_=(c=e.data)===null||c===void 0?void 0:c.slots)===null||_===void 0?void 0:_.title])||((G=l.value.slots)===null||G===void 0?void 0:G.title)||e.title,{prefixCls:x,showIcon:O,icon:$,loadData:S}=l.value,I=le.value,j=`${x}-node-content-wrapper`;let D;if(O){const ee=i||((Y=l.value.slots)===null||Y===void 0?void 0:Y[(Q=d==null?void 0:d.slots)===null||Q===void 0?void 0:Q.icon])||$;D=ee?E("span",{class:pe(`${x}-iconEle`,`${x}-icon__customize`)},[typeof ee=="function"?ee(z.value):ee]):Ae()}else S&&T.value&&(D=Ae());let L;typeof u=="function"?L=u(z.value):L=u,L=L===void 0?Tn:L;const B=E("span",{class:`${x}-title`},[L]);return E("span",{ref:V,title:typeof u=="string"?u:"",class:pe(`${j}`,`${j}-${ve.value||"normal"}`,!I&&(A.value||s.value)&&`${x}-node-selected`),onMouseenter:$e,onMouseleave:Re,onContextmenu:ze,onClick:ke,onDblclick:oe},[D,B,be()])};return()=>{const r=w(w({},e),n),{eventKey:c,isLeaf:_,isStart:G,isEnd:Y,domRef:Q,active:i,data:d,onMousemove:u,selectable:x}=r,O=Pn(r,["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"]),{prefixCls:$,filterTreeNode:S,keyEntities:I,dropContainerKey:j,dropTargetKey:D,draggingNodeKey:L}=l.value,B=le.value,ee=Dt(O,{aria:!0,data:!0}),{level:ue}=I[c]||{},ie=Y[Y.length-1],te=Ie(),ye=!B&&te,Oe=L===c,Ze=x!==void 0?{"aria-selected":!!x}:void 0;return E("div",ae(ae({ref:Q,class:pe(n.class,`${$}-treenode`,{[`${$}-treenode-disabled`]:B,[`${$}-treenode-switcher-${K.value?"open":"close"}`]:!_,[`${$}-treenode-checkbox-checked`]:M.value,[`${$}-treenode-checkbox-indeterminate`]:U.value,[`${$}-treenode-selected`]:A.value,[`${$}-treenode-loading`]:T.value,[`${$}-treenode-active`]:i,[`${$}-treenode-leaf-last`]:ie,[`${$}-treenode-draggable`]:ye,dragging:Oe,"drop-target":D===c,"drop-container":j===c,"drag-over":!B&&q.value,"drag-over-gap-top":!B&&F.value,"drag-over-gap-bottom":!B&&R.value,"filter-node":S&&S(W.value)}),style:n.style,draggable:ye,"aria-grabbed":Oe,onDragstart:ye?Ve:void 0,onDragenter:te?We:void 0,onDragover:te?Ge:void 0,onDragleave:te?Pe:void 0,onDrop:te?Xe:void 0,onDragend:te?qe:void 0,onMousemove:u},Ze),ee),[E(En,{prefixCls:$,level:ue,isStart:G,isEnd:Y},null),Le(),Ye(),Qe(),Je()])}}});function fe(e,t){if(!e)return[];const n=e.slice(),o=n.indexOf(t);return o>=0&&n.splice(o,1),n}function he(e,t){const n=(e||[]).slice();return n.indexOf(t)===-1&&n.push(t),n}function lt(e){return e.split("-")}function zt(e,t){return`${e}-${t}`}function In(e){return e&&e.type&&e.type.isTreeNode}function Ln(e,t){const n=[],o=t[e];function a(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(l=>{let{key:v,children:g}=l;n.push(v),a(g)})}return a(o.children),n}function Mn(e){if(e.parent){const t=lt(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function An(e){const t=lt(e.pos);return Number(t[t.length-1])===0}function ht(e,t,n,o,a,s,l,v,g,f){var y;const{clientX:h,clientY:b}=e,{top:m,height:C}=e.target.getBoundingClientRect(),k=((f==="rtl"?-1:1)*(((a==null?void 0:a.x)||0)-h)-12)/o;let K=v[n.eventKey];if(b<m+C/2){const X=l.findIndex(J=>J.key===K.key),V=X<=0?0:X-1,ne=l[V].key;K=v[ne]}const A=K.key,M=K,P=K.key;let T=0,U=0;if(!g.has(A))for(let X=0;X<k&&Mn(K);X+=1)K=K.parent,U+=1;const q=t.eventData,F=K.node;let R=!0;return An(K)&&K.level===0&&b<m+C/2&&s({dragNode:q,dropNode:F,dropPosition:-1})&&K.key===n.eventKey?T=-1:(M.children||[]).length&&g.has(P)?s({dragNode:q,dropNode:F,dropPosition:0})?T=0:R=!1:U===0?k>-1.5?s({dragNode:q,dropNode:F,dropPosition:1})?T=1:R=!1:s({dragNode:q,dropNode:F,dropPosition:0})?T=0:s({dragNode:q,dropNode:F,dropPosition:1})?T=1:R=!1:s({dragNode:q,dropNode:F,dropPosition:1})?T=1:R=!1,{dropPosition:T,dropLevelOffset:U,dropTargetKey:K.key,dropTargetPos:K.pos,dragOverNodeKey:P,dropContainerKey:T===0?null:((y=K.parent)===null||y===void 0?void 0:y.key)||null,dropAllowed:R}}function pt(e,t){if(!e)return;const{multiple:n}=t;return n?e.slice():e.length?[e[0]]:e}function et(e){if(!e)return null;let t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(typeof e=="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return null;return t}function gt(e,t){const n=new Set;function o(a){if(n.has(a))return;const s=t[a];if(!s)return;n.add(a);const{parent:l,node:v}=s;v.disabled||l&&o(l.key)}return(e||[]).forEach(a=>{o(a)}),[...n]}var _n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};function Ne(e,t){return e!=null?e:t}function rt(e){const{title:t,_title:n,key:o,children:a}=e||{},s=t||"title";return{title:s,_title:n||[s],key:o||"key",children:a||"children"}}function Fn(e){function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return dn(n).map(a=>{var s,l,v,g;if(!In(a))return null;const f=a.children||{},y=a.key,h={};for(const[X,V]of Object.entries(a.props))h[cn(X)]=V;const{isLeaf:b,checkable:m,selectable:C,disabled:p,disableCheckbox:k}=h,K={isLeaf:b||b===""||void 0,checkable:m||m===""||void 0,selectable:C||C===""||void 0,disabled:p||p===""||void 0,disableCheckbox:k||k===""||void 0},A=w(w({},h),K),{title:M=(s=f.title)===null||s===void 0?void 0:s.call(f,A),icon:P=(l=f.icon)===null||l===void 0?void 0:l.call(f,A),switcherIcon:T=(v=f.switcherIcon)===null||v===void 0?void 0:v.call(f,A)}=h,U=_n(h,["title","icon","switcherIcon"]),q=(g=f.default)===null||g===void 0?void 0:g.call(f),F=w(w(w({},U),{title:M,icon:P,switcherIcon:T,key:y,isLeaf:b}),K),R=t(q);return R.length&&(F.children=R),F})}return t(e)}function Bn(e,t,n){const{_title:o,key:a,children:s}=rt(n),l=new Set(t===!0?[]:t),v=[];function g(f){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return f.map((h,b)=>{const m=zt(y?y.pos:"0",b),C=Ne(h[a],m);let p;for(let K=0;K<o.length;K+=1){const A=o[K];if(h[A]!==void 0){p=h[A];break}}const k=w(w({},Nt(h,[...o,a,s])),{title:p,key:C,parent:y,pos:m,children:null,data:h,isStart:[...y?y.isStart:[],b===0],isEnd:[...y?y.isEnd:[],b===f.length-1]});return v.push(k),t===!0||l.has(C)?k.children=g(h[s]||[],k):k.children=[],k})}return g(e),v}function jn(e,t,n){let o={};typeof n=="object"?o=n:o={externalGetKey:n},o=o||{};const{childrenPropName:a,externalGetKey:s,fieldNames:l}=o,{key:v,children:g}=rt(l),f=a||g;let y;s?typeof s=="string"?y=b=>b[s]:typeof s=="function"&&(y=b=>s(b)):y=(b,m)=>Ne(b[v],m);function h(b,m,C,p){const k=b?b[f]:e,K=b?zt(C.pos,m):"0",A=b?[...p,b]:[];if(b){const M=y(b,K),P={node:b,index:m,pos:K,key:M,parentPos:C.node?C.pos:null,level:C.level+1,nodes:A};t(P)}k&&k.forEach((M,P)=>{h(M,P,{node:b,pos:K,level:C?C.level+1:-1},A)})}h(null)}function Hn(e){let{initWrapper:t,processEntity:n,onProcessFinished:o,externalGetKey:a,childrenPropName:s,fieldNames:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2?arguments[2]:void 0;const g=a||v,f={},y={};let h={posEntities:f,keyEntities:y};return t&&(h=t(h)||h),jn(e,b=>{const{node:m,index:C,pos:p,key:k,parentPos:K,level:A,nodes:M}=b,P={node:m,nodes:M,index:C,key:k,pos:p,level:A},T=Ne(k,p);f[p]=P,y[T]=P,P.parent=f[K],P.parent&&(P.parent.children=P.parent.children||[],P.parent.children.push(P)),n&&n(P,h)},{externalGetKey:g,childrenPropName:s,fieldNames:l}),o&&o(h),h}function Be(e,t){let{expandedKeysSet:n,selectedKeysSet:o,loadedKeysSet:a,loadingKeysSet:s,checkedKeysSet:l,halfCheckedKeysSet:v,dragOverNodeKey:g,dropPosition:f,keyEntities:y}=t;const h=y[e];return{eventKey:e,expanded:n.has(e),selected:o.has(e),loaded:a.has(e),loading:s.has(e),checked:l.has(e),halfChecked:v.has(e),pos:String(h?h.pos:""),parent:h.parent,dragOver:g===e&&f===0,dragOverGapTop:g===e&&f===-1,dragOverGapBottom:g===e&&f===1}}function je(e){const{data:t,expanded:n,selected:o,checked:a,loaded:s,loading:l,halfChecked:v,dragOver:g,dragOverGapTop:f,dragOverGapBottom:y,pos:h,active:b,eventKey:m}=e,C=w(w({dataRef:t},t),{expanded:n,selected:o,checked:a,loaded:s,loading:l,halfChecked:v,dragOver:g,dragOverGapTop:f,dragOverGapBottom:y,pos:h,active:b,eventKey:m,key:m});return"props"in C||Object.defineProperty(C,"props",{get(){return e}}),C}function Vt(e,t){const n=new Set;return e.forEach(o=>{t.has(o)||n.add(o)}),n}function Rn(e){const{disabled:t,disableCheckbox:n,checkable:o}=e||{};return!!(t||n)||o===!1}function zn(e,t,n,o){const a=new Set(e),s=new Set;for(let v=0;v<=n;v+=1)(t.get(v)||new Set).forEach(f=>{const{key:y,node:h,children:b=[]}=f;a.has(y)&&!o(h)&&b.filter(m=>!o(m.node)).forEach(m=>{a.add(m.key)})});const l=new Set;for(let v=n;v>=0;v-=1)(t.get(v)||new Set).forEach(f=>{const{parent:y,node:h}=f;if(o(h)||!f.parent||l.has(f.parent.key))return;if(o(f.parent.node)){l.add(y.key);return}let b=!0,m=!1;(y.children||[]).filter(C=>!o(C.node)).forEach(C=>{let{key:p}=C;const k=a.has(p);b&&!k&&(b=!1),!m&&(k||s.has(p))&&(m=!0)}),b&&a.add(y.key),m&&s.add(y.key),l.add(y.key)});return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Vt(s,a))}}function Vn(e,t,n,o,a){const s=new Set(e);let l=new Set(t);for(let g=0;g<=o;g+=1)(n.get(g)||new Set).forEach(y=>{const{key:h,node:b,children:m=[]}=y;!s.has(h)&&!l.has(h)&&!a(b)&&m.filter(C=>!a(C.node)).forEach(C=>{s.delete(C.key)})});l=new Set;const v=new Set;for(let g=o;g>=0;g-=1)(n.get(g)||new Set).forEach(y=>{const{parent:h,node:b}=y;if(a(b)||!y.parent||v.has(y.parent.key))return;if(a(y.parent.node)){v.add(h.key);return}let m=!0,C=!1;(h.children||[]).filter(p=>!a(p.node)).forEach(p=>{let{key:k}=p;const K=s.has(k);m&&!K&&(m=!1),!C&&(K||l.has(k))&&(C=!0)}),m||s.delete(h.key),C&&l.add(h.key),v.add(h.key)});return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(Vt(l,s))}}function tt(e,t,n,o,a,s){let l;s?l=s:l=Rn;const v=new Set(e.filter(f=>!!n[f]));let g;return t===!0?g=zn(v,a,o,l):g=Vn(v,t.halfCheckedKeys,a,o,l),g}function Wn(e){const t=Fe(0),n=H();return Ce(()=>{const o=new Map;let a=0;const s=e.value||{};for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const v=s[l],{level:g}=v;let f=o.get(g);f||(f=new Set,o.set(g,f)),f.add(v),a=Math.max(a,g)}t.value=a,n.value=o}),{maxLevel:t,levelEntities:n}}const Gn=new It("antCheckboxEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),qn=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:w(w({},_e(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,[`> ${e.antCls}-row`]:{flex:1}}),[n]:w(w({},_e(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:w(w({},_e(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:w({},nt(e))},[`${t}-inner`]:{boxSizing:"border-box",position:"relative",top:0,insetInlineStart:0,display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.checkboxSize/14*5,height:e.checkboxSize/14*8,border:`${e.lineWidthBold}px solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[t]:{"&-indeterminate":{[`${t}-inner`]:{"&:after":{top:"50%",insetInlineStart:"50%",width:e.fontSizeLG/2,height:e.fontSizeLG/2,backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${n}:hover ${t}:after`]:{visibility:"visible"},[`
        ${n}:not(${n}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}},"&:after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderRadius:e.borderRadiusSM,visibility:"hidden",border:`${e.lineWidthBold}px solid ${e.colorPrimary}`,animationName:Gn,animationDuration:e.motionDurationSlow,animationTimingFunction:"ease-in-out",animationFillMode:"backwards",content:'""',transition:`all ${e.motionDurationSlow}`}},[`
        ${n}-checked:not(${n}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}:after`]:{borderColor:e.colorPrimaryHover}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function Wt(e,t){const n=Tt(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[qn(n)]}const So=Pt("Checkbox",(e,t)=>{let{prefixCls:n}=t;return[Wt(n,e)]});var bt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Xn=De({compatConfig:{MODE:3},name:"MotionTreeNode",inheritAttrs:!1,props:w(w({},Rt),{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),setup(e,t){let{attrs:n,slots:o}=t;const a=H(!0),s=at(),l=H(!1),v=N(()=>e.motion?e.motion:wn()),g=(f,y)=>{var h,b,m,C;y==="appear"?(b=(h=v.value)===null||h===void 0?void 0:h.onAfterEnter)===null||b===void 0||b.call(h,f):y==="leave"&&((C=(m=v.value)===null||m===void 0?void 0:m.onAfterLeave)===null||C===void 0||C.call(m,f)),l.value||e.onMotionEnd(),l.value=!0};return Ke(()=>e.motionNodes,()=>{e.motionNodes&&e.motionType==="hide"&&a.value&&Ft(()=>{a.value=!1})},{immediate:!0,flush:"post"}),_t(()=>{e.motionNodes&&e.onMotionStart()}),bn(()=>{e.motionNodes&&g()}),()=>{const{motion:f,motionNodes:y,motionType:h,active:b,eventKey:m}=e,C=bt(e,["motion","motionNodes","motionType","active","eventKey"]);return y?E(fn,ae(ae({},v.value),{},{appear:h==="show",onAfterAppear:p=>g(p,"appear"),onAfterLeave:p=>g(p,"leave")}),{default:()=>[mn(E("div",{class:`${s.value.prefixCls}-treenode-motion`},[y.map(p=>{const k=bt(p.data,[]),{title:K,key:A,isStart:M,isEnd:P}=p;return delete k.children,E(yt,ae(ae({},k),{},{title:K,active:b,data:p.data,key:A,eventKey:A,isStart:M,isEnd:P}),o)})]),[[un,a.value]])]}):E(yt,ae(ae({class:n.class,style:n.style},C),{},{active:b,eventKey:m}),o)}}});function Un(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=e.length,o=t.length;if(Math.abs(n-o)!==1)return{add:!1,key:null};function a(s,l){const v=new Map;s.forEach(f=>{v.set(f,!0)});const g=l.filter(f=>!v.has(f));return g.length===1?g[0]:null}return n<o?{add:!0,key:a(e,t)}:{add:!1,key:a(t,e)}}function mt(e,t,n){const o=e.findIndex(l=>l.key===n),a=e[o+1],s=t.findIndex(l=>l.key===n);if(a){const l=t.findIndex(v=>v.key===a.key);return t.slice(s+1,l)}return t.slice(s+1)}var Kt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const St={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Yn=()=>{},Se=`RC_TREE_MOTION_${Math.random()}`,ot={key:Se},Gt={key:Se,level:0,index:0,pos:"0",node:ot,nodes:[ot]},xt={parent:null,children:[],pos:Gt.pos,data:ot,title:null,key:Se,isStart:[],isEnd:[]};function kt(e,t,n,o){return t===!1||!n?e:e.slice(0,Math.ceil(n/o)+1)}function wt(e){const{key:t,pos:n}=e;return Ne(t,n)}function Qn(e){let t=String(e.key),n=e;for(;n.parent;)n=n.parent,t=`${n.key} > ${t}`;return t}const Jn=De({compatConfig:{MODE:3},name:"NodeList",inheritAttrs:!1,props:Dn,setup(e,t){let{expose:n,attrs:o}=t;const a=Fe(),s=Fe(),{expandedKeys:l,flattenNodes:v}=Ht();n({scrollTo:p=>{a.value.scrollTo(p)},getIndentWidth:()=>s.value.offsetWidth});const g=H(v.value),f=H([]),y=Fe(null);function h(){g.value=v.value,f.value=[],y.value=null,e.onListChangeEnd()}const b=at();Ke([()=>l.value.slice(),v],(p,k)=>{let[K,A]=p,[M,P]=k;const T=Un(M,K);if(T.key!==null){const{virtual:U,height:q,itemHeight:F}=e;if(T.add){const R=P.findIndex(ne=>{let{key:J}=ne;return J===T.key}),X=kt(mt(P,A,T.key),U,q,F),V=P.slice();V.splice(R+1,0,xt),g.value=V,f.value=X,y.value="show"}else{const R=A.findIndex(ne=>{let{key:J}=ne;return J===T.key}),X=kt(mt(A,P,T.key),U,q,F),V=A.slice();V.splice(R+1,0,xt),g.value=V,f.value=X,y.value="hide"}}else P!==A&&(g.value=A)}),Ke(()=>b.value.dragging,p=>{p||h()});const m=N(()=>e.motion===void 0?g.value:v.value),C=()=>{e.onActiveChange(null)};return()=>{const p=w(w({},e),o),{prefixCls:k,selectable:K,checkable:A,disabled:M,motion:P,height:T,itemHeight:U,virtual:q,focusable:F,activeItem:R,focused:X,tabindex:V,onKeydown:ne,onFocus:J,onBlur:ve,onListChangeStart:le,onListChangeEnd:xe}=p,re=Kt(p,["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"]);return E(Kn,null,[X&&R&&E("span",{style:St,"aria-live":"assertive"},[Qn(R)]),E("div",null,[E("input",{style:St,disabled:F===!1||M,tabindex:F!==!1?V:null,onKeydown:ne,onFocus:J,onBlur:ve,value:"",onChange:Yn,"aria-label":"for screen reader"},null)]),E("div",{class:`${k}-treenode`,"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[E("div",{class:`${k}-indent`},[E("div",{ref:s,class:`${k}-indent-unit`},null)])]),E(kn,ae(ae({},Nt(re,["onActiveChange"])),{},{data:m.value,itemKey:wt,height:T,fullHeight:!1,virtual:q,itemHeight:U,prefixCls:`${k}-list`,ref:a,onVisibleChange:(z,de)=>{const W=new Set(z);de.filter(oe=>!W.has(oe)).some(oe=>wt(oe)===Se)&&h()}}),{default:z=>{const{pos:de}=z,W=Kt(z.data,[]),{title:Z,key:oe,isStart:ce,isEnd:ge}=z,ke=Ne(oe,de);return delete W.key,delete W.children,E(Xn,ae(ae({},W),{},{eventKey:ke,title:Z,active:!!R&&oe===R.key,data:z.data,isStart:ce,isEnd:ge,motion:P,motionNodes:oe===Se?f.value:null,motionType:y.value,onMotionStart:le,onMotionEnd:h,onMousemove:C}),null)}})])}}});function Zn(e){let{dropPosition:t,dropLevelOffset:n,indent:o}=e;const a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"2px"};switch(t){case-1:a.top=0,a.left=`${-n*o}px`;break;case 1:a.bottom=0,a.left=`${-n*o}px`;break;case 0:a.bottom=0,a.left=`${o}`;break}return E("div",{style:a},null)}const eo=10,xo=De({compatConfig:{MODE:3},name:"Tree",inheritAttrs:!1,props:vn(Nn(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,expandAction:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Zn,allowDrop:()=>!0}),setup(e,t){let{attrs:n,slots:o,expose:a}=t;const s=H(!1);let l={};const v=H(),g=H([]),f=H([]),y=H([]),h=H([]),b=H([]),m=H([]),C={},p=At({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),k=H([]);Ke([()=>e.treeData,()=>e.children],()=>{k.value=e.treeData!==void 0?e.treeData.slice():Fn(ut(e.children))},{immediate:!0,deep:!0});const K=H({}),A=H(!1),M=H(null),P=H(!1),T=N(()=>rt(e.fieldNames)),U=H();let q=null,F=null,R=null;const X=N(()=>({expandedKeysSet:V.value,selectedKeysSet:ne.value,loadedKeysSet:J.value,loadingKeysSet:ve.value,checkedKeysSet:le.value,halfCheckedKeysSet:xe.value,dragOverNodeKey:p.dragOverNodeKey,dropPosition:p.dropPosition,keyEntities:K.value})),V=N(()=>new Set(m.value)),ne=N(()=>new Set(g.value)),J=N(()=>new Set(h.value)),ve=N(()=>new Set(b.value)),le=N(()=>new Set(f.value)),xe=N(()=>new Set(y.value));Ce(()=>{if(k.value){const i=Hn(k.value,{fieldNames:T.value});K.value=w({[Se]:Gt},i.keyEntities)}});let re=!1;Ke([()=>e.expandedKeys,()=>e.autoExpandParent,K],(i,d)=>{let[u,x]=i,[O,$]=d,S=m.value;if(e.expandedKeys!==void 0||re&&x!==$)S=e.autoExpandParent||!re&&e.defaultExpandParent?gt(e.expandedKeys,K.value):e.expandedKeys;else if(!re&&e.defaultExpandAll){const I=w({},K.value);delete I[Se],S=Object.keys(I).map(j=>I[j].key)}else!re&&e.defaultExpandedKeys&&(S=e.autoExpandParent||e.defaultExpandParent?gt(e.defaultExpandedKeys,K.value):e.defaultExpandedKeys);S&&(m.value=S),re=!0},{immediate:!0});const z=H([]);Ce(()=>{z.value=Bn(k.value,m.value,T.value)}),Ce(()=>{e.selectable&&(e.selectedKeys!==void 0?g.value=pt(e.selectedKeys,e):!re&&e.defaultSelectedKeys&&(g.value=pt(e.defaultSelectedKeys,e)))});const{maxLevel:de,levelEntities:W}=Wn(K);Ce(()=>{if(e.checkable){let i;if(e.checkedKeys!==void 0?i=et(e.checkedKeys)||{}:!re&&e.defaultCheckedKeys?i=et(e.defaultCheckedKeys)||{}:k.value&&(i=et(e.checkedKeys)||{checkedKeys:f.value,halfCheckedKeys:y.value}),i){let{checkedKeys:d=[],halfCheckedKeys:u=[]}=i;e.checkStrictly||({checkedKeys:d,halfCheckedKeys:u}=tt(d,!0,K.value,de.value,W.value)),f.value=d,y.value=u}}}),Ce(()=>{e.loadedKeys&&(h.value=e.loadedKeys)});const Z=()=>{w(p,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},oe=i=>{U.value.scrollTo(i)};Ke(()=>e.activeKey,()=>{e.activeKey!==void 0&&(M.value=e.activeKey)},{immediate:!0}),Ke(M,i=>{Ft(()=>{i!==null&&oe({key:i})})},{immediate:!0,flush:"post"});const ce=i=>{e.expandedKeys===void 0&&(m.value=i)},ge=()=>{p.draggingNodeKey!==null&&w(p,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),q=null,R=null},ke=(i,d)=>{const{onDragend:u}=e;p.dragOverNodeKey=null,ge(),u==null||u({event:i,node:d.eventData}),F=null},$e=i=>{ke(i,null),window.removeEventListener("dragend",$e)},Re=(i,d)=>{const{onDragstart:u}=e,{eventKey:x,eventData:O}=d;F=d,q={x:i.clientX,y:i.clientY};const $=fe(m.value,x);p.draggingNodeKey=x,p.dragChildrenKeys=Ln(x,K.value),v.value=U.value.getIndentWidth(),ce($),window.addEventListener("dragend",$e),u&&u({event:i,node:O})},ze=(i,d)=>{const{onDragenter:u,onExpand:x,allowDrop:O,direction:$}=e,{pos:S,eventKey:I}=d;if(R!==I&&(R=I),!F){Z();return}const{dropPosition:j,dropLevelOffset:D,dropTargetKey:L,dropContainerKey:B,dropTargetPos:ee,dropAllowed:ue,dragOverNodeKey:ie}=ht(i,F,d,v.value,q,O,z.value,K.value,V.value,$);if(p.dragChildrenKeys.indexOf(L)!==-1||!ue){Z();return}if(l||(l={}),Object.keys(l).forEach(te=>{clearTimeout(l[te])}),F.eventKey!==d.eventKey&&(l[S]=window.setTimeout(()=>{if(p.draggingNodeKey===null)return;let te=m.value.slice();const ye=K.value[d.eventKey];ye&&(ye.children||[]).length&&(te=he(m.value,d.eventKey)),ce(te),x&&x(te,{node:d.eventData,expanded:!0,nativeEvent:i})},800)),F.eventKey===L&&D===0){Z();return}w(p,{dragOverNodeKey:ie,dropPosition:j,dropLevelOffset:D,dropTargetKey:L,dropContainerKey:B,dropTargetPos:ee,dropAllowed:ue}),u&&u({event:i,node:d.eventData,expandedKeys:m.value})},Ve=(i,d)=>{const{onDragover:u,allowDrop:x,direction:O}=e;if(!F)return;const{dropPosition:$,dropLevelOffset:S,dropTargetKey:I,dropContainerKey:j,dropAllowed:D,dropTargetPos:L,dragOverNodeKey:B}=ht(i,F,d,v.value,q,x,z.value,K.value,V.value,O);p.dragChildrenKeys.indexOf(I)!==-1||!D||(F.eventKey===I&&S===0?p.dropPosition===null&&p.dropLevelOffset===null&&p.dropTargetKey===null&&p.dropContainerKey===null&&p.dropTargetPos===null&&p.dropAllowed===!1&&p.dragOverNodeKey===null||Z():$===p.dropPosition&&S===p.dropLevelOffset&&I===p.dropTargetKey&&j===p.dropContainerKey&&L===p.dropTargetPos&&D===p.dropAllowed&&B===p.dragOverNodeKey||w(p,{dropPosition:$,dropLevelOffset:S,dropTargetKey:I,dropContainerKey:j,dropTargetPos:L,dropAllowed:D,dragOverNodeKey:B}),u&&u({event:i,node:d.eventData}))},We=(i,d)=>{R===d.eventKey&&!i.currentTarget.contains(i.relatedTarget)&&(Z(),R=null);const{onDragleave:u}=e;u&&u({event:i,node:d.eventData})},Ge=function(i,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var x;const{dragChildrenKeys:O,dropPosition:$,dropTargetKey:S,dropTargetPos:I,dropAllowed:j}=p;if(!j)return;const{onDrop:D}=e;if(p.dragOverNodeKey=null,ge(),S===null)return;const L=w(w({},Be(S,ut(X.value))),{active:((x=_.value)===null||x===void 0?void 0:x.key)===S,data:K.value[S].node});O.indexOf(S);const B=lt(I),ee={event:i,node:je(L),dragNode:F?F.eventData:null,dragNodesKeys:[F.eventKey].concat(O),dropToGap:$!==0,dropPosition:$+Number(B[B.length-1])};u||D==null||D(ee),F=null},Pe=(i,d)=>{const{expanded:u,key:x}=d,O=z.value.filter(S=>S.key===x)[0],$=je(w(w({},Be(x,X.value)),{data:O.data}));ce(u?fe(m.value,x):he(m.value,x)),be(i,$)},qe=(i,d)=>{const{onClick:u,expandAction:x}=e;x==="click"&&Pe(i,d),u&&u(i,d)},Xe=(i,d)=>{const{onDblclick:u,expandAction:x}=e;(x==="doubleclick"||x==="dblclick")&&Pe(i,d),u&&u(i,d)},Te=(i,d)=>{let u=g.value;const{onSelect:x,multiple:O}=e,{selected:$}=d,S=d[T.value.key],I=!$;I?O?u=he(u,S):u=[S]:u=fe(u,S);const j=K.value,D=u.map(L=>{const B=j[L];return B?B.node:null}).filter(L=>L);e.selectedKeys===void 0&&(g.value=u),x&&x(u,{event:"select",selected:I,node:d,selectedNodes:D,nativeEvent:i})},Ie=(i,d,u)=>{const{checkStrictly:x,onCheck:O}=e,$=d[T.value.key];let S;const I={event:"check",node:d,checked:u,nativeEvent:i},j=K.value;if(x){const D=u?he(f.value,$):fe(f.value,$),L=fe(y.value,$);S={checked:D,halfChecked:L},I.checkedNodes=D.map(B=>j[B]).filter(B=>B).map(B=>B.node),e.checkedKeys===void 0&&(f.value=D)}else{let{checkedKeys:D,halfCheckedKeys:L}=tt([...f.value,$],!0,j,de.value,W.value);if(!u){const B=new Set(D);B.delete($),{checkedKeys:D,halfCheckedKeys:L}=tt(Array.from(B),{checked:!1,halfCheckedKeys:L},j,de.value,W.value)}S=D,I.checkedNodes=[],I.checkedNodesPositions=[],I.halfCheckedKeys=L,D.forEach(B=>{const ee=j[B];if(!ee)return;const{node:ue,pos:ie}=ee;I.checkedNodes.push(ue),I.checkedNodesPositions.push({node:ue,pos:ie})}),e.checkedKeys===void 0&&(f.value=D,y.value=L)}O&&O(S,I)},Le=i=>{const d=i[T.value.key],u=new Promise((x,O)=>{const{loadData:$,onLoad:S}=e;if(!$||J.value.has(d)||ve.value.has(d))return null;$(i).then(()=>{const j=he(h.value,d),D=fe(b.value,d);S&&S(j,{event:"load",node:i}),e.loadedKeys===void 0&&(h.value=j),b.value=D,x()}).catch(j=>{const D=fe(b.value,d);if(b.value=D,C[d]=(C[d]||0)+1,C[d]>=eo){const L=he(h.value,d);e.loadedKeys===void 0&&(h.value=L),x()}O(j)}),b.value=he(b.value,d)});return u.catch(()=>{}),u},Ue=(i,d)=>{const{onMouseenter:u}=e;u&&u({event:i,node:d})},Me=(i,d)=>{const{onMouseleave:u}=e;u&&u({event:i,node:d})},Ye=(i,d)=>{const{onRightClick:u}=e;u&&(i.preventDefault(),u({event:i,node:d}))},Qe=i=>{const{onFocus:d}=e;A.value=!0,d&&d(i)},Ae=i=>{const{onBlur:d}=e;A.value=!1,c(null),d&&d(i)},be=(i,d)=>{let u=m.value;const{onExpand:x,loadData:O}=e,{expanded:$}=d,S=d[T.value.key];if(P.value)return;u.indexOf(S);const I=!$;if(I?u=he(u,S):u=fe(u,S),ce(u),x&&x(u,{node:d,expanded:I,nativeEvent:i}),I&&O){const j=Le(d);j&&j.then(()=>{}).catch(D=>{const L=fe(m.value,S);ce(L),Promise.reject(D)})}},Je=()=>{P.value=!0},r=()=>{setTimeout(()=>{P.value=!1})},c=i=>{const{onActiveChange:d}=e;M.value!==i&&(e.activeKey!==void 0&&(M.value=i),i!==null&&oe({key:i}),d&&d(i))},_=N(()=>M.value===null?null:z.value.find(i=>{let{key:d}=i;return d===M.value})||null),G=i=>{let d=z.value.findIndex(x=>{let{key:O}=x;return O===M.value});d===-1&&i<0&&(d=z.value.length),d=(d+i+z.value.length)%z.value.length;const u=z.value[d];if(u){const{key:x}=u;c(x)}else c(null)},Y=N(()=>je(w(w({},Be(M.value,X.value)),{data:_.value.data,active:!0}))),Q=i=>{const{onKeydown:d,checkable:u,selectable:x}=e;switch(i.which){case we.UP:{G(-1),i.preventDefault();break}case we.DOWN:{G(1),i.preventDefault();break}}const O=_.value;if(O&&O.data){const $=O.data.isLeaf===!1||!!(O.data.children||[]).length,S=Y.value;switch(i.which){case we.LEFT:{$&&V.value.has(M.value)?be({},S):O.parent&&c(O.parent.key),i.preventDefault();break}case we.RIGHT:{$&&!V.value.has(M.value)?be({},S):O.children&&O.children.length&&c(O.children[0].key),i.preventDefault();break}case we.ENTER:case we.SPACE:{u&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?Ie({},S,!le.value.has(M.value)):!u&&x&&!S.disabled&&S.selectable!==!1&&Te({},S);break}}}d&&d(i)};return a({onNodeExpand:be,scrollTo:oe,onKeydown:Q,selectedKeys:N(()=>g.value),checkedKeys:N(()=>f.value),halfCheckedKeys:N(()=>y.value),loadedKeys:N(()=>h.value),loadingKeys:N(()=>b.value),expandedKeys:N(()=>m.value)}),Sn(()=>{window.removeEventListener("dragend",$e),s.value=!0}),On({expandedKeys:m,selectedKeys:g,loadedKeys:h,loadingKeys:b,checkedKeys:f,halfCheckedKeys:y,expandedKeysSet:V,selectedKeysSet:ne,loadedKeysSet:J,loadingKeysSet:ve,checkedKeysSet:le,halfCheckedKeysSet:xe,flattenNodes:z}),()=>{const{draggingNodeKey:i,dropLevelOffset:d,dropContainerKey:u,dropTargetKey:x,dropPosition:O,dragOverNodeKey:$}=p,{prefixCls:S,showLine:I,focusable:j,tabindex:D=0,selectable:L,showIcon:B,icon:ee=o.icon,switcherIcon:ue,draggable:ie,checkable:te,checkStrictly:ye,disabled:Oe,motion:Ze,loadData:qt,filterTreeNode:Xt,height:Ut,itemHeight:Yt,virtual:Qt,dropIndicatorRender:Jt,onContextmenu:Zt,onScroll:en,direction:tn,rootClassName:nn,rootStyle:on}=e,{class:an,style:ln}=n,rn=Dt(w(w({},e),n),{aria:!0,data:!0});let Ee;return ie?typeof ie=="object"?Ee=ie:typeof ie=="function"?Ee={nodeDraggable:ie}:Ee={}:Ee=!1,E($n,{value:{prefixCls:S,selectable:L,showIcon:B,icon:ee,switcherIcon:ue,draggable:Ee,draggingNodeKey:i,checkable:te,customCheckable:o.checkable,checkStrictly:ye,disabled:Oe,keyEntities:K.value,dropLevelOffset:d,dropContainerKey:u,dropTargetKey:x,dropPosition:O,dragOverNodeKey:$,dragging:i!==null,indent:v.value,direction:tn,dropIndicatorRender:Jt,loadData:qt,filterTreeNode:Xt,onNodeClick:qe,onNodeDoubleClick:Xe,onNodeExpand:be,onNodeSelect:Te,onNodeCheck:Ie,onNodeLoad:Le,onNodeMouseEnter:Ue,onNodeMouseLeave:Me,onNodeContextMenu:Ye,onNodeDragStart:Re,onNodeDragEnter:ze,onNodeDragOver:Ve,onNodeDragLeave:We,onNodeDragEnd:ke,onNodeDrop:Ge,slots:o}},{default:()=>[E("div",{role:"tree",class:pe(S,an,nn,{[`${S}-show-line`]:I,[`${S}-focused`]:A.value,[`${S}-active-focused`]:M.value!==null}),style:on},[E(Jn,ae({ref:U,prefixCls:S,style:ln,disabled:Oe,selectable:L,checkable:!!te,motion:Ze,height:Ut,itemHeight:Yt,virtual:Qt,focusable:j,focused:A.value,tabindex:D,activeItem:_.value,onFocus:Qe,onBlur:Ae,onKeydown:Q,onActiveChange:c,onListChangeStart:Je,onListChangeEnd:r,onContextmenu:Zt,onScroll:en},rn),null)])]})}}});var to={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};function Ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){no(e,a,n[a])})}return e}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(t,n){var o=Ct({},t,n.attrs);return E(He,Ct({},o,{icon:to}),null)};it.displayName="FileOutlined";it.inheritAttrs=!1;var oo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};function $t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){ao(e,a,n[a])})}return e}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=function(t,n){var o=$t({},t,n.attrs);return E(He,$t({},o,{icon:oo}),null)};st.displayName="MinusSquareOutlined";st.inheritAttrs=!1;var lo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){ro(e,a,n[a])})}return e}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=function(t,n){var o=Ot({},t,n.attrs);return E(He,Ot({},o,{icon:lo}),null)};dt.displayName="PlusSquareOutlined";dt.inheritAttrs=!1;var io={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){so(e,a,n[a])})}return e}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(t,n){var o=Et({},t,n.attrs);return E(He,Et({},o,{icon:io}),null)};ct.displayName="CaretDownFilled";ct.inheritAttrs=!1;function ko(e,t,n,o,a){const{isLeaf:s,expanded:l,loading:v}=n;let g=t;if(v)return E(yn,{class:`${e}-switcher-loading-icon`},null);let f;a&&typeof a=="object"&&(f=a.showLeafIcon);let y=null;const h=`${e}-switcher-icon`;return s?a?f&&o?o(n):(typeof a=="object"&&!f?y=E("span",{class:`${e}-switcher-leaf-line`},null):y=E(it,{class:`${e}-switcher-line-icon`},null),y):null:(y=E(ct,{class:h},null),a&&(y=l?E(st,{class:`${e}-switcher-line-icon`},null):E(dt,{class:`${e}-switcher-line-icon`},null)),typeof t=="function"?g=t(w(w({},n),{defaultIcon:y,switcherCls:h})):hn(g)&&(g=xn(g,{class:h})),g||y)}const co=new It("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),uo=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),fo=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${t.lineWidthBold}px solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),vo=(e,t)=>{const{treeCls:n,treeNodeCls:o,treeNodePadding:a,treeTitleHeight:s}=t,l=(s-t.fontSizeLG)/2,v=t.paddingXS;return{[n]:w(w({},_e(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,[`&${n}-rtl`]:{[`${n}-switcher`]:{"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${n}-active-focused)`]:w({},nt(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${o}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:a,insetInlineStart:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:co,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${o}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${a}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${n}-node-content-wrapper`]:w({},nt(t)),[`&:not(${o}-disabled).filter-node ${n}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${n}-draggable-icon`]:{width:s,lineHeight:`${s}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${t.motionDurationSlow}`,[`${o}:hover &`]:{opacity:.45}},[`&${o}-disabled`]:{[`${n}-draggable-icon`]:{visibility:"hidden"}}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:s}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:w(w({},uo(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:s,margin:0,lineHeight:`${s}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:s/2,bottom:-a,marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:s/2*.8,height:s/2,borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:v,marginBlockStart:l},[`${n}-node-content-wrapper, ${n}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:s,margin:0,padding:`0 ${t.paddingXS/2}px`,color:"inherit",lineHeight:`${s}px`,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:t.controlItemBgHover},[`&${n}-node-selected`]:{backgroundColor:t.controlItemBgActive},[`${n}-iconEle`]:{display:"inline-block",width:s,height:s,lineHeight:`${s}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}-node-content-wrapper`]:w({lineHeight:`${s}px`,userSelect:"none"},fo(e,t)),[`${o}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${t.colorPrimary}`}},"&-show-line":{[`${n}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:s/2,bottom:-a,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${o}-leaf-last`]:{[`${n}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${s/2}px !important`}}}}})}},yo=e=>{const{treeCls:t,treeNodeCls:n,treeNodePadding:o}=e;return{[`${t}${t}-directory`]:{[n]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:o,insetInlineStart:0,transition:`background-color ${e.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:e.controlItemBgHover}},"> *":{zIndex:1},[`${t}-switcher`]:{transition:`color ${e.motionDurationMid}`},[`${t}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${t}-node-selected`]:{color:e.colorTextLightSolid,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:e.colorPrimary},[`${t}-switcher`]:{color:e.colorTextLightSolid},[`${t}-node-content-wrapper`]:{color:e.colorTextLightSolid,background:"transparent"}}}}}},ho=(e,t)=>{const n=`.${e}`,o=`${n}-treenode`,a=t.paddingXS/2,s=t.controlHeightSM,l=Tt(t,{treeCls:n,treeNodeCls:o,treeNodePadding:a,treeTitleHeight:s});return[vo(e,l),yo(l)]},wo=Pt("Tree",(e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:Wt(`${n}-checkbox`,e)},ho(n,e),Cn(e)]});export{it as F,xo as T,yt as V,tt as a,fe as b,Hn as c,he as d,So as e,wo as f,Fn as g,rt as h,gt as i,ho as j,Wt as k,ko as r,Nn as t,Wn as u};
