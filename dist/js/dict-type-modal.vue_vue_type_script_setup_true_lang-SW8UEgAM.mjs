var d=(f,r,t)=>new Promise((o,c)=>{var m=e=>{try{n(t.next(e))}catch(s){c(s)}},l=e=>{try{n(t.throw(e))}catch(s){c(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(m,l);n((t=t.apply(f,r)).next())});import{s as y,$ as u}from"./bootstrap-CIlPtDbU.mjs";import{u as _}from"./vxe-table-CS5KFeE-.mjs";import{c as b,e as w,f as N}from"./dict-type-SUN05zMk.mjs";import{a9 as C,Q as I,J as T,a3 as v,at as x,au as k,av as B,n as V,a8 as h}from"../jse/index-index-CulmqKVw.mjs";import{u as A}from"./use-modal-BmBYziM1.mjs";const U=()=>[{component:"Input",fieldName:"dictName",label:"字典名称"},{component:"Input",fieldName:"dictType",label:"字典类型"}],z=[{type:"checkbox",width:60},{title:"字典名称",field:"dictName"},{title:"字典类型",field:"dictType"},{title:"备注",field:"remark"},{title:"创建时间",field:"createTime"},{field:"action",fixed:"right",slots:{default:"action"},title:"操作",width:180}],F=()=>[{component:"Input",dependencies:{show:()=>!1,triggerFields:[""]},fieldName:"dictId",label:"dictId"},{component:"Input",fieldName:"dictName",label:"字典名称",rules:"required"},{component:"Input",fieldName:"dictType",help:"使用英文/下划线命名, 如:sys_normal_disable",label:"字典类型",rules:y().regex(/^[a-z_]+$/i,{message:"字典类型只能使用英文/下划线命名"})},{component:"Textarea",fieldName:"remark",formItemClass:"items-baseline",label:"备注"}],J=C({__name:"dict-type-modal",emits:["reload"],setup(f,{emit:r}){const t=r,o=I(!1),c=T(()=>o.value?u("pages.common.edit"):u("pages.common.add")),[m,l]=_({commonConfig:{labelWidth:100},schema:F(),showDefaultActions:!1}),[n,e]=A({fullscreenButton:!1,onCancel:p,onConfirm:s,onOpenChange:i=>d(this,null,function*(){if(!i)return null;e.modalLoading(!0);const{id:a}=e.getData();if(o.value=!!a,o.value&&a){const g=yield b(a);yield l.setValues(g)}e.modalLoading(!1)})});function s(){return d(this,null,function*(){try{e.modalLoading(!0);const{valid:i}=yield l.validate();if(!i)return;const a=v(yield l.getValues());yield o.value?w(a):N(a),t("reload"),yield p()}catch(i){console.error(i)}finally{e.modalLoading(!1)}})}function p(){return d(this,null,function*(){e.close(),yield l.resetForm()})}return(i,a)=>(x(),k(h(n),{"close-on-click-modal":!1,title:c.value},{default:B(()=>[V(h(m))]),_:1},8,["title"]))}});export{J as _,z as c,U as q};
