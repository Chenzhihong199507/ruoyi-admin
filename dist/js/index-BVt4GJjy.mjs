var S=Object.defineProperty;var h=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var $=(i,o,t)=>o in i?S(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,q=(i,o)=>{for(var t in o||(o={}))V.call(o,t)&&$(i,t,o[t]);if(h)for(var t of h(o))B.call(o,t)&&$(i,t,o[t]);return i};var _=(i,o,t)=>new Promise((k,n)=>{var v=a=>{try{c(t.next(a))}catch(u){n(u)}},d=a=>{try{c(t.throw(a))}catch(u){n(u)}},c=a=>a.done?k(a.value):Promise.resolve(a.value).then(v,d);c((t=t.apply(i,o)).next())});import{aq as E}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{q as F,_ as N,d as O,c as z,a as G}from"./dept-drawer.vue_vue_type_script_setup_true_lang-1i5kTonY.mjs";import{S as A}from"./index-BLUbi1M4.mjs";import{_ as P}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as R,b2 as j,br as H,at as y,au as w,av as r,n as m,a8 as l,aC as L,aD as f,aG as g,ap as x,q as M}from"../jse/index-index-CulmqKVw.mjs";import{u as W}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as J}from"./use-drawer-0pSlBI5S.mjs";import{P as K}from"./index-BLw-otuj.mjs";import{l as Q}from"./tree-DR0G1ezI.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./index-DxROXI-t.mjs";import"./get-popup-container-BwMHEyJY.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const Xt=R({__name:"index",setup(i){const o={commonConfig:{labelWidth:80},schema:F(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},t={columns:z,height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(e,p)=>_(this,null,function*(){const s=yield G(q({},p));return{rows:Q(s,{id:"deptId",pid:"parentId",children:"children"})}}),querySuccess:()=>{M(()=>{D()})}}},rowConfig:{isHover:!0,keyField:"deptId"},round:!0,align:"center",showOverflow:!0,treeConfig:{parentField:"parentId",rowField:"deptId",transform:!1}},[k,n]=W({formOptions:o,gridOptions:t}),[v,d]=J({connectedComponent:N});function c(){d.setData({update:!1}),d.open()}function a(e){return _(this,null,function*(){d.setData({id:e.deptId,update:!0}),d.open()})}function u(e){return _(this,null,function*(){yield O(e.deptId),yield n.query()})}function D(){var e;(e=n.grid)==null||e.setAllTreeExpand(!0)}function I(){var e;(e=n.grid)==null||e.setAllTreeExpand(!1)}return(e,p)=>{const s=j("a-button"),C=H("access");return y(),w(l(P),{"auto-content-height":!0},{default:r(()=>[m(l(k),null,{"toolbar-actions":r(()=>p[2]||(p[2]=[L("span",{class:"pl-[7px] text-[16px]"},"部门列表",-1)])),"toolbar-tools":r(()=>[m(l(A),null,{default:r(()=>[m(s,{onClick:I},{default:r(()=>[f(g(e.$t("pages.common.collapse")),1)]),_:1}),m(s,{onClick:D},{default:r(()=>[f(g(e.$t("pages.common.expand")),1)]),_:1}),x((y(),w(s,{type:"primary",onClick:c},{default:r(()=>[f(g(e.$t("pages.common.add")),1)]),_:1})),[[C,["system:dept:add"],"code"]])]),_:1})]),action:r(({row:b})=>[m(l(A),null,{default:r(()=>[x((y(),w(s,{size:"small",type:"link",onClick:T=>a(b)},{default:r(()=>[f(g(e.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[C,["system:dept:edit"],"code"]]),m(l(K),{placement:"left",title:"确认删除？",onConfirm:T=>u(b)},{default:r(()=>[x((y(),w(s,{danger:"",size:"small",type:"link",onClick:p[0]||(p[0]=E(()=>{},["stop"]))},{default:r(()=>[f(g(e.$t("pages.common.delete")),1)]),_:1})),[[C,["system:dept:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1}),m(l(v),{onReload:p[1]||(p[1]=b=>l(n).query())})]),_:1})}}});export{Xt as default};
