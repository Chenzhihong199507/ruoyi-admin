var Ie=Object.defineProperty,ze=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var ae=(s,e,o)=>e in s?Ie(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,m=(s,e)=>{for(var o in e||(e={}))fe.call(e,o)&&ae(s,o,e[o]);if(J)for(var o of J(e))me.call(e,o)&&ae(s,o,e[o]);return s},P=(s,e)=>ze(s,Fe(e));var X=(s,e)=>{var o={};for(var a in s)fe.call(s,a)&&e.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&J)for(var a of J(s))e.indexOf(a)<0&&me.call(s,a)&&(o[a]=s[a]);return o};var R=(s,e,o)=>ae(s,typeof e!="symbol"?e+"":e,o);var ne=(s,e,o)=>new Promise((a,l)=>{var i=c=>{try{g(o.next(c))}catch(r){l(r)}},f=c=>{try{g(o.throw(c))}catch(r){l(r)}},g=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,f);g((o=o.apply(s,e)).next())});import{W as we,c8 as be,c9 as Xe,ca as Re,a9 as Ye,cb as je,cc as Ne,cd as He,ce as xe,cf as Ke,cg as We,ch as Ue,ci as qe,c5 as Je,cj as Ge,ck as Qe,e as he,c4 as Ze,c6 as et}from"./bootstrap-CIlPtDbU.mjs";import{a9 as k,at as u,au as p,av as h,as as y,aw as tt,ax as ot,a8 as t,V as ke,az as re,J as N,Q as M,n as V,ay as b,b4 as O,b5 as x,ar as ce,X as Be,ak as st,ab as at,ac as nt,bv as le,aK as lt,a7 as Me,W as ge,aD as Y,aG as j,aC as rt,q as Oe,be as ct,i as it,h as ye}from"../jse/index-index-CulmqKVw.mjs";import{_ as dt}from"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import{X as ut}from"./x-BK4QZNWW.mjs";import{V as pt}from"./loading-7m7uS9S_.mjs";const ft=we("ExpandIcon",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);const mt=we("ShrinkIcon",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]),ht=k({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:e}){const l=be(s,e);return(i,f)=>(u(),p(t(Xe),tt(ot(t(l))),{default:h(()=>[y(i.$slots,"default")]),_:3},16))}}),gt=["data-dismissable-modal"],yt=k({__name:"DialogOverlay",setup(s){Re();const e=ke("DISMISSABLE_MODAL_ID");return(o,a)=>(u(),re("div",{"data-dismissable-modal":t(e),class:"bg-overlay fixed inset-0 z-[1000]"},null,8,gt))}}),vt=k({__name:"DialogContent",props:{class:{},closeClass:{},modal:{type:Boolean},open:{type:Boolean},showClose:{type:Boolean,default:!0},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["close","escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{expose:e,emit:o}){const a=s,l=o,i=N(()=>{const w=a,{class:c,modal:r,open:d,showClose:_}=w;return X(w,["class","modal","open","showClose"])}),f=be(i,l),g=M(null);return e({getContentRef:()=>g.value}),(c,r)=>(u(),p(t(He),null,{default:h(()=>[V(Ye,{name:"fade"},{default:h(()=>[c.open&&c.modal?(u(),p(yt,{key:0,onClick:r[0]||(r[0]=()=>l("close"))})):b("",!0)]),_:1}),V(t(Ne),ce({ref_key:"contentRef",ref:g},t(f),{class:t(x)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] fixed z-[1000] w-full p-6 shadow-lg outline-none sm:rounded-xl",a.class)}),{default:h(()=>[y(c.$slots,"default"),c.showClose?(u(),p(t(je),{key:0,class:O(t(x)("data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-3 top-3 h-6 w-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",a.closeClass)),onClick:r[1]||(r[1]=()=>l("close"))},{default:h(()=>[V(t(ut),{class:"h-4 w-4"})]),_:1},8,["class"])):b("",!0)]),_:3},16,["class"])]),_:3}))}}),ve=k({__name:"DialogDescription",props:{class:{},asChild:{type:Boolean},as:{}},setup(s){const e=s,o=N(()=>{const f=e,{class:l}=f;return X(f,["class"])}),a=xe(o);return(l,i)=>(u(),p(t(Ke),ce(t(a),{class:t(x)("text-muted-foreground text-sm",e.class)}),{default:h(()=>[y(l.$slots,"default")]),_:3},16,["class"]))}}),_t=k({__name:"DialogFooter",props:{class:{}},setup(s){const e=s;return(o,a)=>(u(),re("div",{class:O(t(x)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[y(o.$slots,"default")],2))}}),Ct=k({__name:"DialogHeader",props:{class:{}},setup(s){const e=s;return(o,a)=>(u(),re("div",{class:O(t(x)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[y(o.$slots,"default")],2))}}),_e=k({__name:"DialogTitle",props:{class:{},asChild:{type:Boolean},as:{}},setup(s){const e=s,o=N(()=>{const f=e,{class:l}=f;return X(f,["class"])}),a=xe(o);return(l,i)=>(u(),p(t(We),ce(t(a),{class:t(x)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:h(()=>[y(l.$slots,"default")]),_:3},16,["class"]))}});function wt(s,e,o){const a=Be({offsetX:0,offsetY:0}),l=M(!1),i=r=>{const d=r.clientX,_=r.clientY;if(!s.value)return;const C=s.value.getBoundingClientRect(),{offsetX:w,offsetY:T}=a,I=C.left,H=C.top,G=C.width,Q=C.height,K=document.documentElement,D=K.clientWidth,Z=K.clientHeight,ee=-I+w,te=-H+T,z=D-I-G+w,oe=Z-H-Q+T,$=S=>{let A=w+S.clientX-d,E=T+S.clientY-_;A=Math.min(Math.max(A,ee),z),E=Math.min(Math.max(E,te),oe),a.offsetX=A,a.offsetY=E,s.value&&(s.value.style.transform=`translate(${A}px, ${E}px)`,l.value=!0)},W=()=>{l.value=!1,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",W)},f=()=>{const r=le(e);r&&s.value&&r.addEventListener("mousedown",i)},g=()=>{const r=le(e);r&&s.value&&r.removeEventListener("mousedown",i)},c=()=>{a.offsetX=0,a.offsetY=0;const r=le(s);r&&(r.style.transform="none")};return st(()=>{at(()=>{o.value?f():g()})}),nt(()=>{g()}),{dragging:l,resetPosition:c,transform:a}}const bt=k({__name:"modal",props:{modalApi:{default:void 0},cancelText:{},centered:{type:Boolean},class:{},closable:{type:Boolean},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},draggable:{type:Boolean},footer:{type:Boolean},footerClass:{},fullscreen:{type:Boolean},fullscreenButton:{type:Boolean},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},title:{},titleTooltip:{}},setup(s){var q,pe;const e=s,o=M(),a=M(),l=M(),i=M(),f=M(),g=lt();Me("DISMISSABLE_MODAL_ID",g);const{$t:c}=Ue(),{isMobile:r}=qe(),d=(pe=(q=e.modalApi)==null?void 0:q.useStore)==null?void 0:pe.call(q),{cancelText:_,centered:C,class:w,closable:T,closeOnClickModal:I,closeOnPressEscape:H,confirmLoading:G,confirmText:Q,contentClass:K,description:D,draggable:Z,footer:ee,footerClass:te,fullscreen:z,fullscreenButton:oe,header:$,headerClass:W,loading:S,modal:A,openAutoFocus:E,showCancelButton:De,showConfirmButton:$e,title:U,titleTooltip:ie}=Je(e,d),se=N(()=>z.value&&$.value||r.value),de=N(()=>Z.value&&!se.value&&$.value),{dragging:Se,transform:Ae}=wt(l,i,de);ge(()=>{var n;return(n=d==null?void 0:d.value)==null?void 0:n.isOpen},n=>ne(this,null,function*(){if(n){if(yield Oe(),!o.value)return;const v=o.value.getContentRef();l.value=v.$el;const{offsetX:L,offsetY:B}=Ae;l.value.style.transform=`translate(${L}px, ${B}px)`}})),ge(()=>S.value,n=>{n&&a.value&&a.value.scrollTo({top:0})});function Ee(){var n;(n=e.modalApi)==null||n.setState(v=>P(m({},v),{fullscreen:!z.value}))}function Le(n){I.value||(n.preventDefault(),n.stopPropagation())}function Pe(n){H.value||n.preventDefault()}function Ve(n){E.value||n==null||n.preventDefault()}function Te(n){const v=n.target,L=v==null?void 0:v.dataset.dismissableModal;(!I.value||L!==g)&&(n.preventDefault(),n.stopPropagation())}function ue(n){n.preventDefault(),n.stopPropagation()}return(n,v)=>{var L;return u(),p(t(ht),{modal:!1,open:(L=t(d))==null?void 0:L.isOpen,"onUpdate:open":v[2]||(v[2]=()=>{var B;return(B=n.modalApi)==null?void 0:B.close()})},{default:h(()=>{var B;return[V(t(vt),{ref_key:"contentRef",ref:o,class:O(t(x)("border-border left-0 right-0 top-[10vh] mx-auto flex max-h-[80%] w-[520px] flex-col border p-0",t(w),{"left-0 top-0 size-full max-h-full !translate-x-0 !translate-y-0":se.value,"top-1/2 !-translate-y-1/2":t(C)&&!se.value,"duration-300":!t(Se)})),modal:t(A),open:(B=t(d))==null?void 0:B.isOpen,"show-close":t(T),"close-class":"top-3",onCloseAutoFocus:ue,onEscapeKeyDown:Pe,onFocusOutside:ue,onInteractOutside:Le,onOpenAutoFocus:Ve,onPointerDownOutside:Te},{default:h(()=>[V(t(Ct),{ref_key:"headerRef",ref:i,class:O(t(x)("border-b px-5 py-4",{hidden:!t($),"cursor-move select-none":de.value},t(W)))},{default:h(()=>[t(U)?(u(),p(t(_e),{key:0,class:"text-left"},{default:h(()=>[y(n.$slots,"title",{},()=>[Y(j(t(U))+" ",1),t(ie)?y(n.$slots,"titleTooltip",{key:0},()=>[V(t(Ge),{"trigger-class":"pb-1"},{default:h(()=>[Y(j(t(ie)),1)]),_:1})]):b("",!0)])]),_:3})):b("",!0),t(D)?(u(),p(t(ve),{key:1},{default:h(()=>[y(n.$slots,"description",{},()=>[Y(j(t(D)),1)])]),_:3})):b("",!0),!t(U)||!t(D)?(u(),p(t(Qe),{key:2},{default:h(()=>[t(U)?b("",!0):(u(),p(t(_e),{key:0})),t(D)?b("",!0):(u(),p(t(ve),{key:1}))]),_:1})):b("",!0)]),_:3},8,["class"]),rt("div",{ref_key:"wrapperRef",ref:a,class:O(t(x)("relative min-h-40 flex-1 overflow-y-auto p-3",t(K),{"overflow-hidden":t(S)}))},[t(S)?(u(),p(t(pt),{key:0,class:"size-full h-auto min-h-full",spinning:""})):b("",!0),y(n.$slots,"default")],2),t(oe)?(u(),p(t(dt),{key:0,class:"hover:bg-accent hover:text-accent-foreground text-foreground/80 flex-center absolute right-10 top-3 hidden size-6 rounded-full px-1 text-lg opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none sm:block",onClick:Ee},{default:h(()=>[t(z)?(u(),p(t(mt),{key:0,class:"size-3.5"})):(u(),p(t(ft),{key:1,class:"size-3.5"}))]),_:1})):b("",!0),t(ee)?(u(),p(t(_t),{key:1,ref_key:"footerRef",ref:f,class:O(t(x)("flex-row items-center justify-end border-t p-2",t(te)))},{default:h(()=>[y(n.$slots,"prepend-footer"),y(n.$slots,"footer",{},()=>[t(De)?(u(),p(t(he),{key:0,variant:"ghost",onClick:v[0]||(v[0]=()=>{var F;return(F=n.modalApi)==null?void 0:F.onCancel()})},{default:h(()=>[y(n.$slots,"cancelText",{},()=>[Y(j(t(_)||t(c)("cancel")),1)])]),_:3})):b("",!0),t($e)?(u(),p(t(he),{key:1,loading:t(G),onClick:v[1]||(v[1]=()=>{var F;return(F=n.modalApi)==null?void 0:F.onConfirm()})},{default:h(()=>[y(n.$slots,"confirmText",{},()=>[Y(j(t(Q)||t(c)("confirm")),1)])]),_:3},8,["loading"])):b("",!0)]),y(n.$slots,"append-footer")]),_:3},8,["class"])):b("",!0)]),_:3},8,["class","modal","open","show-close"])]}),_:3},8,["open"])}}});class xt{constructor(e={}){R(this,"api");R(this,"state");R(this,"sharedData",{payload:{}});R(this,"store");const r=e,{connectedComponent:o,onBeforeClose:a,onCancel:l,onConfirm:i,onOpenChange:f}=r,g=X(r,["connectedComponent","onBeforeClose","onCancel","onConfirm","onOpenChange"]),c={centered:!1,class:"",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",draggable:!1,footer:!0,footerClass:"",fullscreen:!1,fullscreenButton:!0,header:!0,headerClass:"",isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,showCancelButton:!0,showConfirmButton:!0,title:""};this.store=new Ze(m(m({},c),g),{onUpdate:()=>{var _,C,w;const d=this.store.state;(d==null?void 0:d.isOpen)===((_=this.state)==null?void 0:_.isOpen)?this.state=d:(this.state=d,(w=(C=this.api).onOpenChange)==null||w.call(C,!!(d!=null&&d.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:l,onConfirm:i,onOpenChange:f},ct(this)}batchStore(e){this.store.batch(e)}close(){var o,a,l;((l=(a=(o=this.api).onBeforeClose)==null?void 0:a.call(o))!=null?l:!0)&&this.store.setState(i=>P(m({},i),{isOpen:!1}))}getData(){var e,o;return(o=(e=this.sharedData)==null?void 0:e.payload)!=null?o:{}}modalLoading(e){this.store.setState(o=>P(m({},o),{confirmLoading:e,loading:e}))}onCancel(){var e,o;this.api.onCancel?(o=(e=this.api).onCancel)==null||o.call(e):this.close()}onConfirm(){var e,o;(o=(e=this.api).onConfirm)==null||o.call(e)}open(){this.store.setState(e=>P(m({},e),{isOpen:!0}))}setData(e){this.sharedData.payload=e}setState(e){it(e)?this.store.setState(e):this.store.setState(o=>m(m({},o),e))}}const Ce=Symbol("VBEN_MODAL_INJECT");function At(s={}){var g;const{connectedComponent:e}=s;if(e){const c=Be({});return[k((d,{attrs:_,slots:C})=>(Me(Ce,{extendApi(w){Object.setPrototypeOf(c,w)},options:s}),kt(c,m(m(m({},d),_),C)),()=>ye(e,m(m({},d),_),C)),{inheritAttrs:!1,name:"VbenParentModal"}),c]}const o=ke(Ce,{}),a=m(m({},o.options),s);a.onOpenChange=c=>{var r,d,_;(r=s.onOpenChange)==null||r.call(s,c),(_=(d=o.options)==null?void 0:d.onOpenChange)==null||_.call(d,c)};const l=new xt(a),i=l;i.useStore=c=>et(l.store,c);const f=k((c,{attrs:r,slots:d})=>()=>ye(bt,P(m(m({},c),r),{modalApi:i}),d),{inheritAttrs:!1,name:"VbenModal"});return(g=o.extendApi)==null||g.call(o,i),[f,i]}function kt(s,e){return ne(this,null,function*(){var l;if(!e||Object.keys(e).length===0)return;yield Oe();const o=(l=s==null?void 0:s.store)==null?void 0:l.state;if(!o)return;const a=new Set(Object.keys(o));for(const i of Object.keys(e))a.has(i)&&!["class"].includes(i)&&console.warn(`[Vben Modal]: When 'connectedComponent' exists, do not set props or slots '${i}', which will increase complexity. If you need to modify the props of Modal, please use useVbenModal or api.`)})}export{At as u};
