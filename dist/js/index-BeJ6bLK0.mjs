var z=Object.defineProperty;var x=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var T=(a,i,o)=>i in a?z(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o,S=(a,i)=>{for(var o in i||(i={}))B.call(i,o)&&T(a,o,i[o]);if(x)for(var o of x(i))O.call(i,o)&&T(a,o,i[o]);return a};var u=(a,i,o)=>new Promise((c,h)=>{var p=n=>{try{m(o.next(n))}catch(g){h(g)}},D=n=>{try{m(o.throw(n))}catch(g){h(g)}},m=n=>n.done?c(n.value):Promise.resolve(n.value).then(p,D);m((o=o.apply(a,i)).next())});import{cz as P,aq as R,M as I,bC as $}from"./bootstrap-CIlPtDbU.mjs";import"./vxe-table-CS5KFeE-.mjs";import{q as N,o as j,a as E,b as q,c as G,d as U}from"./oss-config-drawer-EbHq4JXd.mjs";import{T as F}from"./table-switch-DVTqHQEs.mjs";import{S as H}from"./index-BLUbi1M4.mjs";import{_ as L}from"./page.vue_vue_type_script_setup_true_lang-BEwXti9W.mjs";import{a9 as Q,Q as J,b2 as K,br as V,at as f,au as C,av as s,n as y,a8 as r,aC as W,ap as v,aD as k,aG as w}from"../jse/index-index-CulmqKVw.mjs";import{u as X}from"./use-vxe-grid-CIpB4HOm.mjs";import{u as Z}from"./use-drawer-0pSlBI5S.mjs";import{P as ee}from"./index-BLw-otuj.mjs";import"./render-C5tDa4zc.mjs";import"./data-CRYXvPFo.mjs";import"./index-BsPmTjuM.mjs";import"./colors-DLErT_a-.mjs";import"./dict-D8K1MO7Q.mjs";import"./index-B9BKRmLN.mjs";import"./index-CY4pGJKi.mjs";import"./Col-CY1020A8.mjs";import"./responsiveObserve-CKY_yQR9.mjs";import"./useFlexGapSupport-UdCnRdDh.mjs";import"./Trigger-CxuUq1Ff.mjs";import"./ResizeObserver.es-CDE7jhPe.mjs";import"./get-vP85LLZV.mjs";import"./useRefs-DXDFWT8O.mjs";import"./collapseMotion-BYkmK0aG.mjs";import"./debounce-iPjm31B_.mjs";import"./index-CbGq_Vdo.mjs";import"./FormItemContext-D-XKVqk8.mjs";import"./isPlainObject-D3JZnYxx.mjs";import"./EyeOutlined-Bhfo9c26.mjs";import"./CheckOutlined-CIq9xGup.mjs";import"./useMergedState-DtLgCtQF.mjs";import"./uuid-BthZQwsx.mjs";import"./index-B-WsVPHD.mjs";import"./statusUtils-C-zQFcRu.mjs";import"./slide-B9Yt64p6.mjs";import"./index-CwX3_37I.mjs";import"./List-B93VJ5nE.mjs";import"./index-yiE2I97I.mjs";import"./Checkbox-C1LX6amp.mjs";import"./index-uwSnP2fA.mjs";import"./eagerComputed-Bboi8kUT.mjs";import"./index-epHOG_uQ.mjs";import"./index-MMlqTCj9.mjs";import"./index-aPtpRG1I.mjs";import"./Group-B1PMGyxu.mjs";import"./index-CeJhG9t7.mjs";import"./index-CkI6h8s8.mjs";import"./loading-7m7uS9S_.mjs";import"./icon-button.vue_vue_type_script_setup_true_lang-BMSbb8G-.mjs";import"./x-BK4QZNWW.mjs";import"./index-crWPCwF-.mjs";const eo=Q({__name:"index",setup(a){const i={schema:N(),wrapperClass:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={checkboxConfig:{highlight:!0,reserve:!0},columns:G,height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(l,b)=>u(this,[l,b],function*({page:t},e){return e!=null&&e.createTime?(e.params={beginTime:$(e.createTime[0]).format("YYYY-MM-DD 00:00:00"),endTime:$(e.createTime[1]).format("YYYY-MM-DD 23:59:59")},Reflect.deleteProperty(e,"createTime")):Reflect.deleteProperty(e,"params"),yield U(S({pageNum:t.currentPage,pageSize:t.pageSize},e))})}},rowConfig:{isHover:!0,keyField:"ossConfigId"},round:!0,align:"center",showOverflow:!0},c=J(!1),[h,p]=X({formOptions:i,gridOptions:o,gridEvents:{checkboxChange:t=>{c.value=t.records.length>0},checkboxAll:t=>{c.value=t.records.length>0}}}),[D,m]=Z({connectedComponent:j});function n(){m.setData({}),m.open()}function g(t){return u(this,null,function*(){m.setData({id:t.ossConfigId}),m.open()})}function M(t){return u(this,null,function*(){yield q(t.ossConfigId),yield p.query()})}function Y(){const e=p.grid.getCheckboxRecords().map(l=>l.ossConfigId);I.confirm({title:"提示",okType:"danger",content:`确认删除选中的${e.length}条记录吗？`,onOk:()=>u(this,null,function*(){yield q(e),yield p.query()})})}const{hasAccessByCodes:A}=P();return(t,e)=>{const l=K("a-button"),b=V("access");return f(),C(r(L),{"auto-content-height":!0},{default:s(()=>[y(r(h),null,{"toolbar-actions":s(()=>e[2]||(e[2]=[W("span",{class:"pl-[7px] text-[16px]"},"oss配置列表",-1)])),"toolbar-tools":s(()=>[y(r(H),null,{default:s(()=>[v((f(),C(l,{disabled:!c.value,danger:"",type:"primary",onClick:Y},{default:s(()=>[k(w(t.$t("pages.common.delete")),1)]),_:1},8,["disabled"])),[[b,["system:ossConfig:remove"],"code"]]),v((f(),C(l,{type:"primary",onClick:n},{default:s(()=>[k(w(t.$t("pages.common.add")),1)]),_:1})),[[b,["system:ossConfig:add"],"code"]])]),_:1})]),status:s(({row:d})=>[y(r(F),{modelValue:d.status,"onUpdate:modelValue":_=>d.status=_,api:()=>r(E)(d),disabled:!r(A)(["system:ossConfig:edit"]),reload:()=>r(p).query()},null,8,["modelValue","onUpdate:modelValue","api","disabled","reload"])]),action:s(({row:d})=>[v((f(),C(l,{size:"small",type:"link",onClick:_=>g(d)},{default:s(()=>[k(w(t.$t("pages.common.edit")),1)]),_:2},1032,["onClick"])),[[b,["system:ossConfig:edit"],"code"]]),y(r(ee),{placement:"left",title:"确认删除？",onConfirm:_=>M(d)},{default:s(()=>[v((f(),C(l,{danger:"",size:"small",type:"link",onClick:e[0]||(e[0]=R(()=>{},["stop"]))},{default:s(()=>[k(w(t.$t("pages.common.delete")),1)]),_:1})),[[b,["system:ossConfig:remove"],"code"]])]),_:2},1032,["onConfirm"])]),_:1}),y(r(D),{onReload:e[1]||(e[1]=d=>r(p).query())})]),_:1})}}});export{eo as default};
